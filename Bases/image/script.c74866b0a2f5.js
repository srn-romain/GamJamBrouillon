class ZDSAjax{constructor(){const e=document.querySelector("input[name='csrfmiddlewaretoken']");null!==e?this._crsf=e.getAttribute("value"):this._csrf=null}get(e,t,s=(e=>console.error(e))){const n=new Headers;n.append("Accept","application/json"),null!==this._csrf&&n.append("X-CSRFToken",this._crsf),n.append("X-REQUESTED-WITH","XMLHttpRequest");const r={method:"GET",headers:n,mode:"cors",cache:"default"};fetch(new Request(e,r),r).then(e=>{if(e.ok)return Promise.resolve(e.json());throw e.error()}).then(t).catch(s)}put(e,t,s,n){return this._sendRequestWithData(t,"PUT",e,s,n)}post(e,t,s,n){return this._sendRequestWithData(t,"POST",e,s,n)}_sendRequestWithData(e,t,s,n,r){const o=new Headers;o.append("Accept","application/json"),null!==this._csrf&&o.append("X-CSRFToken",this._crsf),o.append("X-REQUESTED-WITH","XMLHttpRequest");return fetch(s,{method:t,headers:o,mode:"cors",cache:"default",body:e}).then(e=>Promise.resolve(e.json())).then(n).catch(r)}}window.ajax=new ZDSAjax;;
!function(t){"use strict";var o=function(e){this.options=t.extend({titleIcon:"",closeText:"Annuler"},e),o._initialized||this.firstRun(),this.init()};function e(e){e.each((function(){var e=t("[href='#"+t(this).attr("id")+"']:first"),i="";e.hasClass("ico-after")&&(i=e.attr("class").split(" ").concat(["light"]).filter((function(t){return-1===["","ico-after","open-modal","blue"].indexOf(t)&&-1===t.indexOf("btn-")})).join(" ")),new o({title:t(this).is("[data-modal-title]")?t(this).attr("data-modal-title"):e.text(),footer:t(this).find(".btn, [type=submit]").filter(":not(.modal-inner)").detach(),body:t(this).children(),modal:t(this),closeText:t(this).is("[data-modal-close]")?t(this).attr("data-modal-close"):"Annuler",titleIcon:i})}))}o.closeCurrent=function(){o.current.modal.removeClass("open"),o.container.removeClass("open"),t("html").removeClass("dropdown-active"),o.current=null},o.openModal=function(t){o.list[t]&&o.list[t].open()},o.prototype={firstRun:function(){o.container=t("<div>",{class:"modals-container"}),o.wrapper=t("<div>",{class:"modals-wrapper"}),o.overlay=t("<div>",{class:"modals-overlay"}),o.container.append(o.wrapper).append(o.overlay).appendTo(t("body")),o.list=[],o._initialized=!0,o.nextId=0,o.overlay.on("click",o.closeCurrent),t("body").on("click",".open-modal",(function(e){o.openModal(t(this).attr("href").substring(1)),e.preventDefault(),e.stopPropagation()})).on("keydown",(function(t){if(o.current&&27===t.which)o.closeCurrent(),t.stopPropagation();else if(o.current&&13===t.which&&("TEXTAREA"!==document.activeElement.tagName||t.ctrlKey)){var e=o.current.footer.find(".btn-submit").get(0);e&&e.click()}}))},init:function(){this.modal=this.options.modal||t("<div>",{class:"modal modal-flex"}),this.id=this.modal.attr("id")||"noid-"+o.nextId++,this.title=t("<div>",{class:"modal-title",text:this.options.title}),this.options.titleIcon&&this.title.addClass(this.options.titleIcon+" ico-after"),this.body=t("<div>",{class:"modal-body"}).append(this.options.body),this.footer=t("<div>",{class:"modal-footer"}).append(this.options.footer).append(t("<a>",{class:"btn btn-cancel",href:"#close-modal",text:this.options.closeText,click:function(t){o.closeCurrent(),t.preventDefault(),t.stopPropagation()}})),this.modal.addClass("tab-modalize").append(this.title,this.body,this.footer).appendTo(o.wrapper),o.list[this.id]=this},open:function(){o.current&&o.closeCurrent(),this.modal.addClass("open"),o.container.addClass("open"),o.current=this,this.body.find("input:visible, select, textarea").first().focus(),t("html").hasClass("enable-mobile-menu")||t("html").addClass("dropdown-active")},close:function(){o.closeCurrent()}},window.Modal=o,t(document).ready((function(){e(t(".modal")),t("#content").on("DOMNodeInserted",".modal",(function(o){e(t(o.target))}))}))}(jQuery);;
!function(t){"use strict";var i=function(e){this.options=t.extend({target:null,content:null},e),i._initialized||this.firstRun(),this.init()};i.prototype={firstRun:function(){i.container=t("<div>",{class:"tooltips-container"}),i.list=[],i.nextID=0,t("body").append(i.container),i._initialized=!0},init:function(){this.wrapper=t("<div>",{class:"tooltip-wrapper"}),this.elem=t("<div>",{class:"tooltip",id:"tooltip-"+i.nextID,role:"tooltip","aria-hidden":!0}),this.target=t(this.options.target),this.hasContent=!1,this.setOrientation("top"),this.setContent(this.options.content),this.hide(),this.wrapper.append(this.elem).appendTo(i.container),this.target.on("mouseover",this.mouseover.bind(this)),this.wrapper.on("mouseover",this.mouseover.bind(this)),this.target.on("mouseout",this.mouseout.bind(this)),this.wrapper.on("mouseout",this.mouseout.bind(this)),this.target.attr("aria-describedby","tooltip-"+i.nextID),this.hideTimeout=null,this.mouseon=!1,i.list.push(this),i.nextID++},mouseover:function(){this.mouseon||this.show(),this.mouseon=!0,clearTimeout(this.hideTimeout)},mouseout:function(){this.hideTimeout=setTimeout(this.hide.bind(this),50),this.mouseon=!1},setContent:function(i){Array.isArray(i)||(i=[i]),this.elem.empty(),this.hasContent=!1;for(var e=0;e<i.length;e++)i[e]&&(this.hasContent=!0,"string"==typeof i[e]?this.elem.append(document.createTextNode(t.trim(i[e]))):this.elem.append(i[e]));this.hasContent?this.mouseon&&this.show():this.hide()},hide:function(){this.wrapper.hide(),this.elem.attr("aria-hidden",!0)},show:function(){this.hasContent&&(this.wrapper.show(),this.elem.attr("aria-hidden",!1),this.recalc(),setTimeout(this.recalc.bind(this)))},guessOrientation:function(){this.target.offset().top-t(window).scrollTop()<this.wrapper.height()?this.setOrientation("bottom"):this.setOrientation("top")},recalc:function(){var t={top:null,bottom:null,left:this.target.offset().left+this.target.outerWidth()/2-this.wrapper.width()/2};this.guessOrientation(),"top"===this.orientation?t.top=this.target.offset().top-this.wrapper.outerHeight():"bottom"===this.orientation?t.top=this.target.offset().top+this.target.outerHeight():t.bottom=this.target.offset().top-this.wrapper.outerHeight()+8,this.wrapper.css(t)},setOrientation:function(t){"top"!==t&&"bottom"!==t||t===this.orientation||(this.wrapper.addClass(t),this.wrapper.removeClass(this.orientation),this.orientation=t)}},t.fn.tooltip=function(e){var o=t(this).data("tooltip");return o?e&&o.setContent(e):(o=new i({target:this,content:e}),t(this).data("tooltip",o)),o}}(jQuery);;
!function(){function e(e){e.addEventListener("focus",()=>{Array.from(document.querySelectorAll(".header-dropdown")).filter(e=>{return t=e,!("none"===window.getComputedStyle(t).display);var t}).forEach(e=>e.parentElement.querySelector(".active").classList.remove("active")),document.querySelector("#accessibility").classList.add("focused")}),e.addEventListener("blur",()=>{document.querySelector("#accessibility").classList.remove("focused")}),e.addEventListener("click",()=>{const e=this.getAttribute("href");setTimeout(()=>{document.querySelectorAll(e).item(0).focus()})})}window.addEventListener("DOMContentLoaded",()=>{Array.from(document.querySelectorAll("#accessibility a")).forEach(t=>e(t))})}();;
window.addEventListener("DOMContentLoaded",()=>{Array.from(document.querySelectorAll(".main .sidebar.accordeon, .main .sidebar .accordeon")).forEach(e=>function(e){const n=["OL","UL"];Array.from(e.querySelectorAll("h4 + ul:not(.unfolded), h4 + ol:not(.unfolded)")).filter(e=>0===e.querySelectorAll(".current").length).forEach(e=>e.classList.add("hidden")),Array.from(e.querySelectorAll("h4")).filter(e=>n.includes(e.nextElementSibling.nodeName)).forEach(e=>e.addEventListener("click",n=>{e.nextElementSibling.classList.toggle("hidden"),n.preventDefault(),n.stopPropagation()}))}(e))});;
!function(t){"use strict";function e(){t("#mobile-menu [data-ajax-input]").each((function(){const e=t(this).data("ajax-input");t(this).text(t(".sidebar").find("button[data-ajax-input='"+e+"']").text())}))}t.fn.toggleText=function(e){let n=this.find(".a11y");n=0===n.length?this:t(n[0]);const a=n.text(),o=this.data(e);n.text(o),this.data(e,a)},t(".sidebar, .flexpage-title-tool .actions").on("click","[data-ajax-input='follow-topic']",(function(n){const a=t(this),o=t(this).parents("form:first");let i=t(this).parents("li:first").next().find("[data-ajax-input='follow-topic-by-email']");const l=a.find("span#follow_text"),s=o.find("span#subscriber_count"),c=a.find("span#subscriber_plural"),u=t(a.attr("data-raw-subscriber-count"));0===i.length&&(i=t(this).parents(".buttons-combined").find("[data-ajax-input='follow-topic-by-email']")),i.prop("disabled",!0);const r=o.find("input[name=csrfmiddlewaretoken]").val(),d=o.find("input[name=topic]").val(),p=o.find("input[name=follow]").val(),f=o.find("input[name=page]").val();t.ajax({url:o.attr("action"),type:"POST",dataType:"json",data:{csrfmiddlewaretoken:r,topic:d,follow:p,page:f},success:function(t){t.follow?o.find("input[name=follow]").val(1):(!1!==i.hasClass("blue")&&!0!==i.hasClass("is-following")||(i.toggleText("content-on-click"),i.addClass("blue").removeClass("is-following"),i.parents("form:first").find("input[name=email]").val(0)),o.find("input[name=follow]").val(0)),l.toggleText("content-on-click"),s.text(t.subscriberCount),c.text(t.subscriberCount>1?"s":""),u&&u.text(t.subscriberCount),a.toggleClass("blue yellow is-following"),a.blur(),e()},complete:function(){i.prop("disabled",!1)}}),n.stopPropagation(),n.preventDefault()})),t(".sidebar, .flexpage-title-tool .actions").on("click","[data-ajax-input='follow-topic-by-email']",(function(n){const a=t(this);let o=t(this).parents("li:first").prev().find("[data-ajax-input='follow-topic']");const i=t(this).parents("form:first");0===o.length&&(o=t(this).parents(".buttons-combined").find("[data-ajax-input='follow-topic']")),o.prop("disabled",!0);const l=i.find("input[name=csrfmiddlewaretoken]").val(),s=i.find("input[name=topic]").val(),c=i.find("input[name=email]").val(),u=i.find("input[name=page]").val();t.ajax({url:i.attr("action"),type:"POST",dataType:"json",data:{csrfmiddlewaretoken:l,topic:s,email:c,page:u},success:function(t){t.email?(!1!==o.hasClass("yellow")&&!1!==o.hasClass("is-following")||(o.toggleText("content-on-click"),o.removeClass("blue"),o.addClass("yellow is-following"),o.parents("form:first").find("input[name=follow]").val(1)),i.find("input[name=email]").val(1)):i.find("input[name=email]").val(0),a.toggleText("content-on-click"),a.toggleClass("blue, is-following"),a.blur(),e()},complete:function(){o.prop("disabled",!1)}}),n.stopPropagation(),n.preventDefault()})),t(".sidebar").on("click","[data-ajax-input='request-featured']",(function(n){const a=t(this),o=t(this).parents("form:first"),i=a.find("#request_text"),l=o.find("#featured_request_count"),s=a.find("#featured_request_plural"),c=o.find("input[name=csrfmiddlewaretoken]").val(),u=o.find("input[name=request_featured]").val();t.ajax({url:o.attr("action"),type:"POST",dataType:"json",data:{csrfmiddlewaretoken:c,request_featured:u},success:function(t){i.toggleText("content-on-click"),l.text(t.newCount),s.text(t.newCount>1?"s":""),a.toggleClass("blue yellow"),e()}}),n.stopPropagation(),n.preventDefault()})),t(".sidebar").on("click","[data-ajax-input='solve-topic']",(function(n){const a=t(this),o=t(this).parents("form:first"),i=o.find("input[name=csrfmiddlewaretoken]").val(),l=o.find("input[name=topic]").val(),s=o.find("input[name=solved]").val(),c=o.find("input[name=page]").val();t.ajax({url:o.attr("action"),type:"POST",dataType:"json",data:{csrfmiddlewaretoken:i,topic:l,solved:s,page:c},success:function(n){n.solved?o.find("input[name=solved]").val(1):o.find("input[name=solved]").val(0),a.toggleText("content-on-click"),a.toggleClass("green blue"),t("[data-ajax-output='solve-topic']").html("Vous venez de marquer ce sujet comme résolu."),t("[data-ajax-output='solve-topic']").toggleClass("empty"),e()}}),n.stopPropagation(),n.preventDefault()})),t("#mobile-menu").on("click","[data-ajax-input]",(function(e){const n=t(this).data("ajax-input"),a=t(".sidebar").find("button[data-ajax-input='"+n+"']");a[0]&&(t(this).toggleText("content-on-click"),a.click(),e.stopPropagation(),e.preventDefault())})),t(".message-actions").on("click","[data-ajax-input='cite-message']",(function(e){e.stopPropagation(),e.preventDefault();const n=t(this),a=document.querySelector(".md-editor");t.ajax({url:n.attr("href"),dataType:"json",success:function(t){"new"===localStorage.getItem("editor_choice")?function(t,e){const n=window.editors[t.id].codemirror,a=n.getDoc(),o=a.getCursor();""===n.getValue()?(n.setValue(e+"\n\n"),n.setCursor(n.lineCount(),0)):n.somethingSelected()?a.replaceSelection("\n\n"+e+"\n\n"):a.replaceRange("\n\n"+e+"\n\n",o),n.focus()}(a,t.text):function(t,e){if(""===t.value)return void(t.value=e+"\n\n");if(t.selectionStart!==t.selectionEnd||(n=t.value,a=t.selectionStart,(n.slice(0,a).split("\n").slice(-1)[0]||"")+(n.slice(a).split("\n")[0]||"")).trim())return void(t.value=t.value+"\n\n"+e);var n,a;const o=t.value.slice(0,t.selectionStart),i=t.value.slice(t.selectionEnd);t.value=o+"\n"+e+"\n"+i}(a,t.text)}}),"new"===localStorage.getItem("editor_choice")?t("html, body").animate({scrollTop:t(a).siblings(".CodeMirror").top},500):(t("html, body").animate({scrollTop:t(a).top},500),a.focus())})),t(".topic-message").on("click","[data-ajax-input='mark-message-as-useful']",(function(e){const n=t(this),a=n.parents("form:first"),o=a.parents("article"),i=o.find("[data-ajax-output='mark-message-as-useful']"),l=a.find("input[name=csrfmiddlewaretoken]").val(),s=n.find(".desktop"),c=n.find(".until-desktop");t.ajax({url:a.attr("action"),type:"POST",data:{csrfmiddlewaretoken:l},success:function(){if(o.toggleClass("helpful"),i.toggleClass("hidden"),n.blur(),0!==s.length&&0!==c.length){const t=s.text(),e=c.text();s.text(n.data("content-on-click")),c.text(n.data("content-on-click-mobile")),n.data("content-on-click",t),n.data("content-on-click-mobile",e)}else n.toggleText("content-on-click")}}),e.stopPropagation(),e.preventDefault()}))}(jQuery);;
!function(t){"use strict";function e(e,i){this.$wrapper=function(e){const i=t(e),n=t("<div/>",{class:"autocomplete-wrapper"}),o=t("<div/>",{class:"autocomplete-dropdown"});return i.addClass("autocomplete-input").attr("autocomplete","off").wrap(n).parent().append(o)}(t(e)),this.$input=this.$wrapper.find(".autocomplete-input"),this.$dropdown=this.$wrapper.find(".autocomplete-dropdown"),this.$input.on("keyup",this.handleInput.bind(this)),this.$input.on("keydown",this.handleKeydown.bind(this)),this.$input.on("blur",this.hideDropdown.bind(this)),this.options=i,"multiple"!==this.options.type&&"multiple_checkbox"!==this.options.type||(this.$form=this.$wrapper.parents("form:first"),this.$form.on("submit",this.handleSubmit.bind(this)),"multiple_checkbox"===this.options.type&&(this.$excluded=this.$form.find(".excluded_field"))),this.options.clickable&&this.$dropdown.css("font-weight","bold"),this.selected=-1,this._lastInput=""}e.prototype={cache:{},handleKeydown:function(t){let e;switch(t.which){case 38:t.preventDefault(),t.stopPropagation(),-1===this.selected?this.select(this.$dropdown.find("ul li").last().attr("data-autocomplete-id")):(e=this.$dropdown.find("ul li[data-autocomplete-id="+this.selected+"]").prev("li"),this.select(1===e.length?e.attr("data-autocomplete-id"):-1));break;case 40:t.preventDefault(),t.stopPropagation(),-1===this.selected?this.select(this.$dropdown.find("ul li").first().attr("data-autocomplete-id")):(e=this.$dropdown.find("ul li[data-autocomplete-id="+this.selected+"]").next("li"),this.select(1===e.length?e.attr("data-autocomplete-id"):-1));break;case 13:t.ctrlKey||(t.preventDefault(),t.stopPropagation(),this.enter())}},handleInput:function(t){!t||38!==t.which&&40!==t.which&&13!==t.which||(t.preventDefault(),t.stopPropagation());const e=this.$input.val();if(this._lastInput===e)return;this._lastInput=e;const i=this.parseInput(e),n=this;if(i&&i!==this._lastAutocomplete){if(!this.options.minLength||i.length>=this.options.minLength){let t;t="multiple_checkbox"===this.options.type?this.fetchData(i,this.$excluded.val()):this.fetchData(i,""),t.done((function(t){n.updateCache(t.results),n.updateDropdown(n.sortList(t.results,i))})).fail((function(){console.error("[Autocompletition] Something went wrong...")})),this.updateDropdown(this.sortList(this.searchCache(i),i)),this.showDropdown()}}else this.hideDropdown()},handleSubmit:function(){const t=this.$input.val();", "===t.slice(-2)&&this.$input.val(t.slice(0,-2))},showDropdown:function(){this.$input.is("input")&&this.$dropdown.css("width",this.$input.outerWidth()),this.$dropdown.show()},hideDropdown:function(){this.$dropdown.hide()},select:function(t){this.selected=t,this.$dropdown.find("ul li.active").removeClass("active"),this.$dropdown.find("ul li[data-autocomplete-id="+this.selected+"]").addClass("active")},enter:function(t){t=t||this.selected;let e=this.$input.val();if((","===e.substr(-1)||-1===t)&&"multiple"===this.options.type)return!1;const i=this.getFromCache(t);if(!i)return!1;if("multiple"===this.options.type){const t=e.lastIndexOf(",");-1!==t?(e=e.substr(0,t)+", "+i[this.options.fieldname]+", ",this.$input.val(e)):this.$input.val(i[this.options.fieldname]+", ")}else"single"===this.options.type?this.$input.val(i[this.options.fieldname]):"multiple_checkbox"===this.options.type&&(this.$input.before("<label class='checkbox' for='id_options_"+i.id+"'> <input type='checkbox' checked='checked' name='options' id='id_options_"+i.id+"' value='"+i.id+"'>"+i[this.options.fieldname]+"</label>"),this.$excluded.val(this.$excluded.val()+","+i.id),this.$input.val(""));this._lastAutocomplete=i[this.options.fieldname],this.selected=-1,this.$input.trigger("input"),this.options.clickable&&window.open(i.url,"_blank")},updateCache:function(t){for(let e=0;e<t.length;e++)this.cache[t[e][this.options.fieldname]]=t[e]},extractWords:function(e){return t.grep(t.map(e.split(","),t.trim),(function(t){return""===t||void 0===t}),!0)},parseInput:function(t){if("multiple"===this.options.type){if(","===t.substr(-1)||", "===t.substr(-2))return!1;const e=this.extractWords(t);return 0!==e.length&&e[e.length-1]}return t},searchCache:function(e){const i=new RegExp(e,"ig");return t.grep(this.cache,(function(t){return t.this.options.fieldname.match(i)}))},getFromCache:function(t){for(const e in this.cache)if(parseInt(this.cache[e].id)===parseInt(t))return this.cache[e];return!1},filterData:function(t,e){const i=this.options.fieldname;return t.filter((function(t){return-1===e.indexOf(t[i])}))},updateDropdown:function(e){const i=this,n=function(e){e.preventDefault(),e.stopPropagation(),i.enter(t(this).attr("data-autocomplete-id")),i.$input.focus(),i.handleInput()};(e=i.filterData(e,i.extractWords(this.$input.val()))).length>this.options.limit&&(e=e.slice(0,this.options.limit));const o=t("<ul>");let s,a=!1;for(const i in e)t("#my-account .username").text()!==e[i][this.options.fieldname]&&(s=t("<li>").text(e[i][this.options.fieldname]),s.attr("data-autocomplete-id",e[i].id),e[i].id===this.selected&&(s.addClass("active"),a=!0),s.mousedown(n),o.append(s));this.$dropdown.children().remove(),this.options.header&&o[0].childElementCount&&this.$dropdown.append('<div class="autocomplete-dropdown-header">'+this.options.header+"</div>"),this.$dropdown.append(o),a||this.select(o.find("li").first().attr("data-autocomplete-id"))},sortList:function(t,e){const i=[],n=[];for(let o=0;o<t.length;o++)0===t[o][this.options.fieldname].indexOf(e)?i.push(t[o]):n.push(t[o]);const o=function(t,e){const i=t[this.options.fieldname].toLowerCase(),n=e[this.options.fieldname].toLowerCase();return i<n?-1:i>n?1:0};return i.sort(o.bind(this)),n.sort(o.bind(this)),i.concat(n)},fetchData:function(e,i){let n=this.options.url.replace("%s",e);return n=n.replace("%e",i),t.getJSON(n)}},t.fn.autocomplete=function(i){return i||(i=t(this).data("autocomplete")),new e(this,t.extend({type:"single",url:"/api/membres/?search=%s",limit:4,fieldname:"username"},i))},t(document).ready((function(){t("[data-autocomplete]").each((function(){t(this).data&&t(this).autocomplete()}))}))}(jQuery);;
!function(t){function e(t,e){const a=t.classList;a.toggle("selected",e),a.toggle("ico-after",e),a.toggle("tick",e),a.toggle("green",e),t.setAttribute("data-activated",e.toString()),t.parentNode.querySelector('input[name="activated"]').setAttribute("value",(!e).toString())}document.querySelectorAll(".button-toggle").forEach(a=>a.addEventListener("click",a=>{const o=a.target,n=o.parentElement,r=new FormData(n),i="true"!==o.getAttribute("data-activated");e(o,i),a.preventDefault(),a.stopPropagation(),t.post(n.getAttribute("action"),r,t=>e(o,t.state),()=>e(o,!i))}))}(window.ajax);;
!function(){function t(t,e,a){let n,o,r;if(t=Math.max(0,Math.min(360,t)),e=Math.max(0,Math.min(100,e)),a=Math.max(0,Math.min(100,a)),a/=100,0===(e/=100))return n=o=r=a,[Math.round(255*n),Math.round(255*o),Math.round(255*r)];t/=60;const l=Math.floor(t),i=t-l,c=a*(1-e),s=a*(1-e*i),u=a*(1-e*(1-i));switch(l){case 0:n=a,o=u,r=c;break;case 1:n=s,o=a,r=c;break;case 2:n=c,o=a,r=u;break;case 3:n=c,o=s,r=a;break;case 4:n=u,o=c,r=a;break;default:n=a,o=c,r=s}return[Math.round(255*n),Math.round(255*o),Math.round(255*r)]}const e={scales:{x:{type:"time",time:{parser:"DD/MM/YYYY",tooltipFormat:"DD/MM/YYYY",displayFormats:{hour:"DD MMM",day:"DD MMM",week:"DD MMM",month:"MMM YYYY",quarter:"MMM YYYY",year:"YYYY"}}},y:{beginAtZero:!0}},responsive:!0},a=[],n={"view-graph":null,"visit-time-graph":Math.round,"users-graph":null};function o(n,o){const r=JSON.parse(n.getAttribute("data-time")),l=[];r.forEach((function(t){l.push(window.moment(t).format("DD/MM/YYYY"))}));const i=n.dataset,c=[];let s=0;for(const t in i)t.indexOf("views")>-1&&s++;let u=0;for(const e in i)if(e.indexOf("views")>-1){const a=n.getAttribute("data-label-"+e),r=t(u,100,80),l=JSON.parse(i[e]);c.push({label:a,data:o?l.map(o):l,fill:!1,backgroundColor:"rgba("+r.join(",")+", 1)",borderColor:"rgba("+r.join(",")+", 0.70)",lineTension:0}),u+=360/s}const d={type:localStorage.getItem("graphType"),data:{labels:l,datasets:c},options:{...e,scales:{y:{title:{display:!0,text:n.getAttribute("data-y-label")}}}}};a.push(new window.Chart(n,d))}localStorage.getItem("graphType")||localStorage.setItem("graphType","line");const r=document.getElementById("graph_type_toggle");function l(){for(const t in n){const e=document.getElementById(t);null!==e&&o(e,n[t])}}function i(t){null!==t&&(document.querySelectorAll(".tabcontent").forEach((function(t){t.style.display="none"})),document.querySelectorAll(".tablinks").forEach((function(t){t.classList.remove("active")})),document.getElementById(t.getAttribute("id")+"-content").style.display="block",t.classList.add("active"))}null!==r&&(r.addEventListener("click",(function(){"line"===localStorage.getItem("graphType")?(localStorage.setItem("graphType","bar"),r.textContent="Afficher une courbe"):(localStorage.setItem("graphType","line"),r.textContent="Afficher un histogramme"),a.forEach((function(t){t.destroy()})),l()})),r.textContent="line"===localStorage.getItem("graphType")?"Afficher un histogramme":"Afficher une courbe"),l(),document.querySelectorAll(".tablinks").forEach((function(t){t.addEventListener("click",(function(e){i(t)}))})),i(document.querySelector(".tablinks"))}();;
window.addEventListener("DOMContentLoaded",(function(){document.addEventListener("click",e=>{e.target.classList.contains("close-alert-box")&&(e.target.parentElement.remove(),e.preventDefault())})}));;
!function(){function e(e){const t=[];for(;e;)t.push(e),e=e.previousElementSibling;return t}function t(e){const t=[];for(;e;)t.push(e),e=e.nextElementSibling;return t}function r(r){const o=r.parentNode.parentNode;"compare-from"===r.getAttribute("name")?(e(o).forEach(e=>Array.prototype.forEach.call(e.querySelectorAll('[name="compare-to"]'),e=>e.removeAttribute("disabled"))),t(o).forEach(e=>Array.prototype.forEach.call(e.querySelectorAll('[name="compare-to"]'),e=>e.setAttribute("disabled",!0))),Array.prototype.forEach.call(o.querySelectorAll('[name="compare-to"]'),e=>e.setAttribute("disabled",!0))):(e(o).forEach(e=>Array.prototype.forEach.call(e.querySelectorAll('[name="compare-from"]'),e=>e.setAttribute("disabled",!0))),t(o).forEach(e=>Array.prototype.forEach.call(e.querySelectorAll('[name="compare-from"]'),e=>e.removeAttribute("disabled"))),Array.prototype.forEach.call(o.querySelectorAll('[name="compare-from"]'),e=>e.setAttribute("disabled",!0)))}window.addEventListener("DOMContentLoaded",()=>{Array.prototype.forEach.call(document.querySelectorAll('.commits-list input[name^="compare"]:checked'),e=>r(e)),Array.prototype.forEach.call(document.querySelectorAll('.commits-list input[name^="compare"]'),e=>e.addEventListener("change",(function(){r(this)}))),Array.prototype.forEach.call(document.querySelectorAll(".commits-compare-form"),e=>e.addEventListener("submit",(function(e){const t=document.querySelector(".commits-list input[name='compare-from']:checked").value,r=document.querySelector(".commits-list input[name='compare-to']:checked").value;this.querySelector("input[name='from']").value=t,this.querySelector("input[name='to']").value=r})))})}();;
!function(){const e=document.getElementById("exports-modal");if(!e)return;const t=document.querySelector("[data-exports-api]"),n=e.querySelector("section.exports"),r=e.querySelector("footer button.btn"),a=t.dataset.exportsApi,s=t.dataset.requestExportApi,i=n.dataset,o=new Intl.DateTimeFormat("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),d=new Intl.DateTimeFormat("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"});function c(e){n.classList.add("is-empty");const t=document.createElement("p");t.innerHTML=e,n.innerHTML="",n.appendChild(t)}function l(){return fetch(a).then(e=>e.json()).then(e=>{if(0===e.length)return void c(i.trNoExports);const t=["pdf","epub"];e.sort((e,n)=>{const r=t.indexOf(e.format_requested),a=t.indexOf(n.format_requested),s=-1!==r,i=-1!==a;return s&&!i?-1:!s&&i?1:s&&i?r-a:e.format_requested.localeCompare(n.format_requested)}),n.classList.remove("is-empty"),n.innerHTML="";for(const t of e){const e=document.createElement("article"),r=document.createElement("header"),a=document.createElement("h4"),s=document.createElement("p"),c=document.createElement("footer"),l=t.state_of_processing.toLowerCase(),u=new Date(t.date);if(e.classList.add("export"),e.classList.add("is-"+l),a.innerText=i["trFormat"+t.format_requested]||t.format_requested,s.setAttribute("title",d.format(u)),s.innerText=o.format(u)+("success"===l?" – ":""),"success"===l){const e=document.createElement("a");e.setAttribute("title",i.trDownloadTitle),e.innerText=i.trDownload,e.setAttribute("href",t.url),s.appendChild(e)}c.innerText=i["trState"+l],r.appendChild(a),r.appendChild(s),e.appendChild(r),e.appendChild(c),n.appendChild(e)}u(e)}).catch(()=>{c(i.trErrorLoading),u()})}function u(t){let n=e.classList.contains("open");t&&(n&=t.filter(e=>"REQUESTED"===e.state_of_processing||"RUNNING"===e.state_of_processing).length>0),n&&setTimeout(l,4e3)}function m(e,t){r.classList.remove("disabled"),r.classList.remove("submitted"),r.setAttribute("disabled","disabled"),r.innerText=e,setTimeout(()=>{r.removeAttribute("disabled"),r.innerText=r.dataset.initialLabel},1e3*t)}r.dataset.initialLabel=r.innerText,t.addEventListener("click",()=>{l(),t.blur()}),r.addEventListener("click",(function(){r.setAttribute("disabled","disabled"),r.classList.add("disabled"),r.classList.add("submitted"),r.innerText=i.trGenerationWaiting;const e=document.createElement("div");e.classList.add("line-loading"),r.appendChild(e),fetch(s,{method:"POST",headers:new Headers({"X-CSRFToken":r.dataset.csrf})}).then(()=>{m(i.trGenerationRequested,120),l()}).catch(e=>{console.error("Cannot request exports update",e),m(i.trGenerationErrored,5)})}))}();;
!function(t){t(".readiness").on("click",(function(a){const e=t(a.target).data("url"),n="true"===t(a.target).data("is-ready").toString(),r=t("input[name=csrfmiddlewaretoken]").val(),i=!n;t.ajax(e,{method:"PUT",data:{ready_to_publish:i,container_slug:t(a.target).data("container-slug"),parent_container_slug:t(a.target).data("parent-container-slug")||""},success:function(){const e=String(i),n=t(a.target).data("is-ready-"+e);t(a.target).attr("data-is-ready",e).text(n)},headers:{"X-CSRFToken":r}})}))}(jQuery);;
!function(n){"use strict";let t=!1,e=!1;function o(){return n(".header-menu").is("[data-hovering-mode]")}const i=n(".header-dropdown").map((function(i,u){return function(i){const u=i.parent(),c=u.find("> a");let f;function a(){s(),n("body").trigger("click"),c.addClass("active"),i.find(".dropdown-list").scrollTop(0)}function s(){f&&(clearTimeout(f),f=null)}function l(){s(),c.removeClass("active")}return i.on("click",(function(n){n.stopPropagation()})),u.on("mouseenter",(function(){o()&&a()})).on("mouseleave",(function(){o()&&function(){if(f)return;f=setTimeout(l,200)}()})).on("keydown",(function(n){"ArrowRight"===n.key&&(n.preventDefault(),r(c[0],u[0],1)),"ArrowLeft"===n.key&&(n.preventDefault(),r(c[0],u[0],-1))})),c.on("mousedown",(function(){t=!0})).on("mouseup",(function(){t=!1})).on("click",(function(n){o()||(n.preventDefault(),n.stopPropagation(),c.hasClass("active")?l():a())})).on("focus",(function(n){n.preventDefault(),t||c.hasClass("active")||(a(),e||i.find(":tabbable:first").focus())})),{open:a,close:l,$container:u}}(n(u))}));function u(){i.each((function(n,t){t.close()}))}function c(){return n(document.activeElement).parents().filter((function(n,t){return function(n){for(let t=0;t<i.length;t++)if(i[t].$container[0]===n)return!0;return!1}(t)})).length}function r(t,e,o){const i=function(t){const e=n(":tabbable");for(let n=0;n<e.length;n++)if(e[n]===t)return n;return-1}(t);if(-1===i)return;const c=n(":tabbable");for(let n=i+o;n<c.length;n+=o)if(!e.contains(c[n]))return u(),void c[n].focus()}n("body").on("click",u).on("keydown",(function(n){"Tab"===n.key&&setTimeout((function(){c()||u()}),5)})),n(document).on("keydown keyup",(function(n){e=n.shiftKey}))}(jQuery);;
"use strict";function toggleSubmitButtonsState(){$("button[type=submit]").each((t,e)=>{$(e).prop("disabled",!$(e).prop("disabled"))})}function saveFormNoRedirect(t,e){const a=t.serialize();a.preview=void 0,toggleSubmitButtonsState(),e.removeClass("btn-cancel"),$.ajax(t.attr("action"),{method:"POST",data:a,success:a=>{toggleSubmitButtonsState(),$("input[name=last_hash]").val(a.last_hash),e.addClass("btn-submit"),t.attr("action",a.new_url),setTimeout(()=>e.removeClass("btn-submit"),5e3)},error:()=>{toggleSubmitButtonsState(),e.addClass("btn-cancel")}})}!function(t){t(".inline-save-button").click(e=>{const a=t(e.target.form);return e.preventDefault(),e.stopPropagation(),saveFormNoRedirect(a,t(e.target)),!0})}(jQuery);;
!function(e){"use strict";let t=localStorage.getItem("editor_choice");(!t||"old"!==t&&"new"!==t)&&(localStorage.setItem("editor_choice","old"),t="old"),e(".md-editor").each((function(){let o,i,l;"old"===t?(o=["Vous utilisez actuellement notre éditeur historique. Nous sommes en train de développer un nouvel éditeur"," encore au stade expérimental."],i="Essayer le nouvel éditeur.",l="new"):(o="Vous utilisez actuellement notre nouvel éditeur. Attention, il est au stade expérimental !",i="Revenir à l'éditeur historique.",l="old");e('<div class="markdown-help">'+o+' <a href="'+("javascript:localStorage.setItem('editor_choice', '"+l+"');document.location.reload(true);")+'">'+i+"</a></div>").insertBefore(this)}))}(jQuery);;
function mirroringEasyMDE(e,t){const a=$("<textarea></textarea>");return a.attr({"data-antidoteapi_jsconnect_groupe_id":"01",placeholder:t.placeholder,class:"textarea-multivers",style:"display: none;"}),a.val(e.codemirror.getValue()),a.on("change input",(function(){e.codemirror.setValue(a.val())})),e.codemirror.on("change",(function(e){a.val(e.getValue())})),a.on("mousedown select keyup blur",(function(){setTimeout(()=>{const t=e.codemirror,i=convertAbsolute2CmPosition(t,a[0].selectionStart),o=convertAbsolute2CmPosition(t,a[0].selectionEnd);t.setSelection(i,o)},12)})),$(e.element.parentElement).find(".editor-statusbar").before(a),a}function getPositionConverterArray(e){const t=e.split("\n"),a=t.map((e,t)=>e.length);return(e=>{for(let i=0,o=0;i<t.length;i++,o+=a[i-1]+1)e.push(o);return e})([])}function convertCm2AbsolutePosition(e,t){return getPositionConverterArray(e.getValue())[t.line]+t.ch}function convertAbsolute2CmPosition(e,t){const a=getPositionConverterArray(e.getValue()),i=a.findIndex(e=>e>t),o=(i>-1?i:a.length)-1;return{line:o,ch:t-a[o]}}function spellcheckerEasyMDE(e){$(e.toolbarElements["abc-spellchecker"]).attr({"data-antidoteapi_jsconnect_groupe_id":"01","data-antidoteapi_jsconnect_lanceoutil":"C"});const t=e.codemirror.display.lineDiv;if($(t).attr({"data-grammalecte_button":!1,"data-grammalecte_result_via_event":!0}),t.addEventListener("GrammalecteResult",(function(t){const a="string"==typeof t.detail&&JSON.parse(t.detail);a&&"text"===a.sType&&e.codemirror.setValue(a.sText)})),"object"==typeof oGrammalecteAPI&&null!==oGrammalecteAPI||($(e.toolbarElements["abc-grammalecte"]).hide(),document.addEventListener("GrammalecteLoaded",(function(t){$(e.toolbarElements["abc-grammalecte"]).show()}))),"function"==typeof estPresentAntidoteAPI_JSConnect&&estPresentAntidoteAPI_JSConnect()?activeAntidoteAPI_JSConnect():$(e.toolbarElements["abc-spellchecker"]).hide(),!window.thereIsAlreadyAStalkerOnThisPage){window.thereIsAlreadyAStalkerOnThisPage=!0;const t=new MutationObserver((function(a){a.forEach(a=>{"attributes"===a.type&&"data-antidoteapi_jsconnect_initlistener"===a.attributeName&&($(e.toolbarElements["abc-spellchecker"]).show(),t.disconnect())})}));setTimeout(()=>t.disconnect(),3e4),t.observe(e.toolbarElements["abc-spellchecker"],{attributes:!0})}}!function(e){"use strict";const t=e(".inline-save-button");if("new"!==localStorage.getItem("editor_choice"))return;!function(){const e=localStorage.getItem("savedEditorText"),t=e?JSON.parse(e):[];for(const e in t)localStorage.setItem("smde_"+t[e].id,t[e].value);localStorage.removeItem("savedEditorText")}(),e(".message-bottom [data-ajax-input='preview-message'], .preview-btn").on("click",(function(t){t.stopPropagation(),t.preventDefault();const a=e(this),i=a.parents("form:first");let o;o=i.find(".preview-source").length?a.closest("div").prev().find(".md-editor").prop("id"):i.find(".md-editor").prop("id");const r=window.editors[o].value(),n=i.find("input[name=csrfmiddlewaretoken]").val(),l=i.find("input[name=last_post]").val();e.ajax({url:i.attr("action"),type:"POST",data:{csrfmiddlewaretoken:n,text:r,last_post:l,preview:"preview"},success:function(t){e(".previsualisation").remove(),i.find(".preview-source").length?e(t).insertAfter(a):e(t).insertAfter(i)}})}));const a=99999999999,i=e("input[name=csrfmiddlewaretoken]").val();function o(e,t){const a=String(e).match(t);if(a)return a.length>0}function r(e,t,i){let o,r;const n=e.lastLine();for(let l=t;l<=n+1;l++)r=e.getLine(l),l===t?e.replaceRange(i,{line:l,ch:0},{line:l,ch:a}):e.replaceRange(o,{line:l,ch:0},{line:l,ch:a}),o=r,l===n&&(o=e.lineSeparator()+o)}function n(e,t,i,o,r,n){let l,c,s,m;const d=e.getLine(r.line);s=d.slice(0,r.ch),m=d.slice(r.ch);let u=0;if("blocInformation"===t||"blocQuestion"===t||"blocWarning"===t||"blocError"===t||"blocSecret"===t||"blocNeutral"===t)!function(e,t,i){for(let o=t+1;o<=i;o++)e.replaceRange(e.getLine(o).slice(2),{line:o,ch:0},{line:o,ch:a});e.replaceRange("",{line:t,ch:0},{line:t+1,ch:0})}(e,r.line,n.line),r.ch=0;else if("checklist"===t){for(l=r.line;l<=n.line;l++)e.replaceRange(e.getLine(l).slice(i.length),{line:l,ch:0},{line:l,ch:a});n.ch-=i.length}else{const i=/(->)(\s*)/;"keyboard"===t?(s=s.replace(/(\|\|)(?![\s\S]*(\|\|))/,""),m=m.replace(/(\|\|)/,""),u=2):"codeInline"===t?(s=s.replace(/(`)(?![\s\S]*(`))/,""),m=m.replace(/(`)/,""),u=1):"subscript"===t?(s=s.replace(/(~)(?![\s\S]*(~))/,""),m=m.replace(/(~)/,""),u=1):"superscript"===t?(s=s.replace(/(\^)(?![\s\S]*(\^))/,""),m=m.replace(/(\^)/,""),u=1):"alignRight"===t?(c=i.exec(s),s=s.replace(/(->)(\s*)/,""),m=m.replace(/(\s*)(->)/,""),u=c[0].length):"alignCenter"===t?(c=i.exec(s),s=s.replace(/(->)(\s*)/,""),m=m.replace(/(\s*)(<-)/,""),u=c[0].length):"math"===t&&(s=s.replace(/(\$\$)(?![\s\S]*(\$\$))/,""),m=m.replace(/(\$\$)/,""),u=2),e.replaceRange(s+m,{line:r.line,ch:0},{line:r.line,ch:a}),r.ch-=u,r!==n&&(n.ch-=u)}}function l(e,t){e.replaceSelection(t+" "),e.focus()}function c(e,t,i,l){if(/editor-preview-active/.test(e.codemirror.getWrapperElement().lastChild.className))return;l=void 0===l?i:l;const c=e.codemirror,s=function(e){const t=e.getCursor("start"),a=e.getCursor("end"),i=e.getLine(t.line),r={};let n;const l=i.slice(0,t.ch).match(/^(\S)+/g),c=i.slice(a.ch).match(/(\S)+$/g);if(l&&c)o(l,/(.*)*\|\|$/)&&o(c,/^\|\|(.*)*/)?r.keyboard=!0:o(l,/(.*)`|$/)&&o(c,/^`(.*)/)?r.codeInline=!0:o(l,/(.*)~$/)&&o(c,/^~(.*)/)?r.subscript=!0:o(l,/(.*)\^$/)&&o(c,/^\^(.*)/)?r.superscript=!0:o(l,/^->($|\s)+/)&&o(c,/(^|\s)+->$/)?r.alignRight=!0:o(l,/^->($|\s)+/)&&o(c,/(^|\s)+<-$/)?r.alignCenter=!0:o(l,/^\$\$($|\s)+/)&&o(c,/(^|\s)+\$\$$/)&&(r.math=!0);else if(o(i,/^\[\[(.+)\]\]$/)){let o=!0;for(n=t.line+1;n<=a.line;n++)if(!e.getLine(n).startsWith("| ")&&""!==e.getLine(n)){o=!1;break}if(o){const e=/^\[\[(.+)\]\]$/.exec(i)[1].split("|")[0].trim();"i"===e||"information"===e?r.blocInformation=!0:"q"===e||"question"===e?r.blocQuestion=!0:"a"===e||"attention"===e?r.blocWarning=!0:"e"===e||"erreur"===e?r.blocError=!0:"s"===e||"secret"===e?r.blocSecret=!0:"n"!==e&&"neutre"!==e||(r.blocNeutral=!0)}}else{let i=!0;if(t.line!==a.line||t.ch!==a.ch){for(n=t.line;n<=a.line;n++)if(!e.getLine(n).match(/^- \[(.{1})\](\s*)/)&&""!==e.getLine(n)){i=!1;break}i&&(r.checklist=!0)}}return r}(c),m=i,d=l,u=c.getCursor("start"),p=c.getCursor("end");s[t]?n(c,t,m,0,u,p):function(e,t,i,o,n,l){let c,s;if("blocInformation"===t||"blocQuestion"===t||"blocWarning"===t||"blocError"===t||"blocSecret"===t||"blocNeutral"===t){for(c=n.line;c<=l.line;c++)s=i+e.getLine(c),e.replaceRange(s,{line:c,ch:0},{line:c,ch:a});"blocInformation"===t?r(e,n.line,"[[information]]"):"blocQuestion"===t?r(e,n.line,"[[question]]"):"blocWarning"===t?r(e,n.line,"[[attention]]"):"blocError"===t?r(e,n.line,"[[erreur]]"):"blocSecret"===t?r(e,n.line,"[[secret]]"):"blocNeutral"===t&&r(e,n.line,"[[neutre|titre]]"),n.ch=0,l.line+=1,l.ch=l.line.length}else if("checklist"===t){for(c=n.line;c<=l.line;c++)s=i+e.getLine(c),e.replaceRange(s,{line:c,ch:0},{line:c,ch:a});l.ch+=i.length}else s=e.getSelection(),"keyboard"===t?s=s.split("||").join(""):"codeInline"===t?s=s.split("`").join(""):"subscript"===t?s=s.split("~").join(""):"superscript"===t?s=s.split("^").join(""):"alignRight"===t?s=s.split("-> ").join(""):"alignCenter"===t?s=s.split("-> ").join("").split(" <-").join(""):"math"===t&&(s=s.split("$$").join("")),e.replaceSelection(i+s+o),n.ch+=i.length,l.ch=n.ch+s.length}(c,t,m,d,u,p),c.setSelection(u,p),c.focus()}window.editors={};const s=function(t,a,o){const r="/api/galeries/"+document.body.getAttribute("data-gallery")+"/images/",n=new FormData;n.append("physical",t),n.append("title",t.name),e.ajax({url:r,data:n,type:"POST",processData:!1,contentType:!1,headers:{"X-CSRFToken":i},dataType:"json"}).done((function(e){a(e.url)})).fail((function(e){let t="Erreur inconnue";void 0!==e.responseText&&-1!==e.responseText.indexOf("RequestDataTooBig")?t="L'image est trop lourde.":void 0!==e.responseJSON?t=e.responseJSON[0]:void 0!==e.responseText?t=400===parseInt(e.status)?"Quelque chose s'est mal passé lors de l'envoi. Votre image est peut-être trop lourde.":"Erreur "+e.status+" "+e.statusText+" : '"+e.responseText.split("\n")[0]+"'":0===e.readyState&&"error"===e.statusText&&(t="Oups ! Impossible de se connecter au serveur."),o(t)}))};e(".md-editor").each((function(){const o=this,r=e(this).closest("form"),n=(window.location.pathname+window.location.search+"@"+this.getAttribute("name")).replace(/[?|&]page=(\d+)/g,""),m=localStorage.getItem("smde_"+n);let d=500;e(this).hasClass("mini-editor")&&(d=200);const u=new EasyMDE({autoDownloadFontAwesome:!1,element:this,forceSync:!0,autosave:{enabled:!0,uniqueId:n,delay:1e3},indentWithTabs:!1,minHeight:d+"px",placeholder:"Votre message au format Markdown",promptURLs:!0,promptTexts:{image:"Url de votre image",link:"Url de votre lien"},uploadImage:!0,imageUploadFunction:s,imageTexts:{sbInit:"Joindre des images par glisser-déposer ou coller depuis le presse-papiers.",sbOnDragEnter:"Déposez l'image pour l'envoyer dans votre galerie.",sbOnDrop:"Téléchargement d'images #images_names#",sbProgress:"Téléchargement #file_name#: #progress#%",sbOnUploaded:"Image téléchargée #image_name#"},spellChecker:!1,inputStyle:"contenteditable",nativeSpellcheck:!0,sideBySideFullscreen:!1,promptAbbrv:!0,theme:"zest",previewRender:function(t,a){const n=window.editors[o.id];return clearTimeout(n.timeout),n.timeout=setTimeout((function(){e.ajax({url:r.attr("action"),type:"POST",data:{csrfmiddlewaretoken:i,text:t,last_post:"",preview:"preview"},success:function(e){a.innerHTML=e},async:!0})}),600),n.previous_value=t,null},syncSideBySidePreviewScroll:!1,toolbar:[{name:"bold",action:EasyMDE.toggleBold,className:"fa fa-bold",title:"Gras"},{name:"italic",action:EasyMDE.toggleItalic,className:"fa fa-italic",title:"Italique"},{name:"strikethrough",action:EasyMDE.toggleStrikethrough,className:"fa fa-strikethrough",title:"Barré"},{name:"abbr",action:e=>{const t=e.options,i=e.codemirror;let o=i.getSelection(),r="";const n=i.lastLine(),l=i.getLine(n).length,c=i.getCursor("start"),s=i.getCursor("end");if(t.promptAbbrv){if(0===o.length&&(o=prompt("Mot abrégé",""),0===o.length))return!1;r=prompt("Description de l'abbréviation","")}i.replaceRange(i.lineSeparator()+i.lineSeparator()+"*["+o+"]: "+r,{line:n,ch:l},{line:n,ch:a}),i.setSelection(c,s),i.focus()},className:"fa fa-text-width",title:"Abbréviation"},{name:"keyboard",action:e=>{c(e,"keyboard","||")},className:"far fa-keyboard",title:"Touche clavier"},{name:"codeInline",action:e=>{c(e,"codeInline","`")},className:"fa fa-terminal",title:"Code inline"},"|",{name:"superscript",action:e=>{c(e,"superscript","^")},className:"fa fa-superscript",title:"Exposant"},{name:"subscript",action:e=>{c(e,"subscript","~")},className:"fa fa-subscript",title:"Indice"},"|",{name:"alignCenter",action:e=>{c(e,"alignCenter","-> "," <-")},className:"fa fa-align-center",title:"Aligner au centre"},{name:"alignRight",action:e=>{c(e,"alignRight","-> "," ->")},className:"fa fa-align-right",title:"Aligner a droite"},"|",{name:"list-ul",action:EasyMDE.toggleUnorderedList,className:"fa fa-list-ul",title:"Liste à puces"},{name:"ordered-list",action:EasyMDE.toggleOrderedList,className:"fa fa-list-ol",title:"Liste ordonnée"},{name:"checklist",action:e=>{c(e,"checklist","- [ ] ")},className:"far fa-check-square",title:"Liste de taches"},"|",{name:"heading",action:EasyMDE.toggleHeadingSmaller,className:"fas fa-heading",title:"Titres"},"|",{name:"image",action:EasyMDE.drawImage,className:"far fa-image",title:"Image"},{name:"link_btn",action:EasyMDE.drawLink,className:"fa fa-link",title:"Lien"},"|",{name:"quote",action:EasyMDE.toggleBlockquote,className:"fa fa-quote-left",title:"Citation"},{name:"code",action:EasyMDE.toggleCodeBlock,className:"fa fa-code",title:"Bloc de code coloré"},{name:"math",action:e=>{c(e,"math","$$")},className:"fa fa-percent",title:"Formule mathématique"},{name:"table",action:EasyMDE.drawTable,className:"fa fa-table",title:"Table"},"|",{name:"blocMenu",action:e=>{},className:"fa fa-smile",title:"Emojis heureux",children:[{name:"char1",action:e=>{l(e.codemirror,":)")},className:"emoji smile",title:":)"},{name:"char2",action:e=>{l(e.codemirror,":D")},className:"emoji heureux",title:":D"},{name:"char3",action:e=>{l(e.codemirror,";)")},className:"emoji clin",title:";)"},{name:"char8",action:e=>{l(e.codemirror,":soleil:")},className:"emoji soleil",title:":soleil:"},{name:"char4",action:e=>{l(e.codemirror,":p")},className:"emoji langue",title:":P"},{name:"char5",action:e=>{l(e.codemirror,":lol:")},className:"emoji rire",title:":lol:"},{name:"char6",action:e=>{l(e.codemirror,"^^")},className:"emoji hihi",title:"^^"},{name:"char7",action:e=>{l(e.codemirror,":ange:")},className:"emoji ange",title:":ange:"},{name:"char9",action:e=>{l(e.codemirror,":popcorn:")},className:"emoji popcorn",title:":popcorn:"},{name:"char10",action:e=>{l(e.codemirror,":bounce:")},className:"emoji bounce",title:":bounce:"}]},{name:"blocMenu",action:e=>{},className:"fa fa-frown",title:"Emojis mécontents",children:[{name:"char1",action:e=>{l(e.codemirror,":(")},className:"emoji triste",title:":("},{name:"char2",action:e=>{l(e.codemirror,":colere:")},className:"emoji angry",title:":colere:"},{name:"char3",action:e=>{l(e.codemirror,":colere2:")},className:"emoji mechant",title:":colere2:"},{name:"char4",action:e=>{l(e.codemirror,":diable:")},className:"emoji diable",title:":diable:"},{name:"char5",action:e=>{l(e.codemirror,":'(")},className:"emoji pleure",title:":'("},{name:"char6",action:e=>{l(e.codemirror,">_<")},className:"emoji pinch",title:">_<"}]},{name:"blocMenu",action:e=>{},className:"fa fa-meh",title:"Emojis autres",children:[{name:"char1",action:e=>{l(e.codemirror,":euh:")},className:"emoji unsure",title:":euh:"},{name:"char2",action:e=>{l(e.codemirror,":o")},className:"emoji huh",title:":o"},{name:"char3",action:e=>{l(e.codemirror,":B")},className:"emoji b",title:":B"},{name:"char4",action:e=>{l(e.codemirror,"o_O")},className:"emoji blink",title:"o_O"},{name:"char5",action:e=>{l(e.codemirror,":-°")},className:"emoji siffle",title:":-°"},{name:"char6",action:e=>{l(e.codemirror,":magicien:")},className:"emoji magicien",title:":magicien:"},{name:"char8",action:e=>{l(e.codemirror,":pirate:")},className:"emoji pirate",title:":pirate:"},{name:"char9",action:e=>{l(e.codemirror,":honte:")},className:"emoji rouge",title:":honte:"},{name:"char10",action:e=>{l(e.codemirror,":waw:")},className:"emoji waw",title:":waw:"},{name:"char11",action:e=>{l(e.codemirror,":zorro:")},className:"emoji zorro",title:":zorro:"},{name:"char7",action:e=>{l(e.codemirror,":ninja:")},className:"emoji ninja",title:":ninja:"}]},"|",{name:"blocMenu",action:e=>{c(e,"blocInformation","| ")},className:"fa fa-info",title:"Bloc spéciaux",children:[{name:"blocInformation",action:e=>{c(e,"blocInformation","| ")},className:"fa fa-info bloc_information",title:"Bloc information"},{name:"blocQuestion",action:e=>{c(e,"blocQuestion","| ")},className:"fa fa-question bloc_question",title:"Bloc question"},{name:"blocWarning",action:e=>{c(e,"blocWarning","| ")},className:"fas fa-exclamation-triangle bloc_warning",title:"Bloc attention"},{name:"blocError",action:e=>{c(e,"blocError","| ")},className:"fas fa-times-circle bloc_error",title:"Bloc erreur"},{name:"blocSecret",action:e=>{c(e,"blocSecret","| ")},className:"fa fa-eye-slash",title:"Bloc secret"},{name:"blocNeutral",action:e=>{c(e,"blocNeutral","| ")},className:"fa fa-sticky-note",title:"Bloc neutre"}]},"|",{name:"abc-spellchecker",action:e=>{},className:"fas fa-spell-check",title:"Correcteur orthographique externe"},{name:"abc-grammalecte",action:e=>{oGrammalecteAPI.openPanelForText(u.codemirror.getValue(),u.codemirror.display.lineDiv)},className:"fa zdsicon zi-grammalecte",title:"Correcteur orthographique externe"},{name:"switch-contentAreaStyle",action:t=>{u.isFullscreenActive()&&u.toggleFullScreen();const a=u.codemirror.getWrapperElement();e(a.parentElement).children(".textarea-multivers").toggle(),e(a).toggle();const i=e(u.element.parentElement).children(".editor-toolbar");i.hasClass("disabled-for-textarea-mode")?i.removeClass("disabled-for-textarea-mode"):i.addClass("disabled-for-textarea-mode"),u.codemirror.refresh()},className:"fas fa-remove-format",title:"Zone de texte sans mise en forme"},"|",{name:"preview",action:EasyMDE.togglePreview,className:"fa fa-eye no-disable disable-for-textarea-mode",title:"Aperçu"},{name:"side-by-side",action:EasyMDE.toggleSideBySide,className:"fa fa-columns no-disable no-mobile disable-for-textarea-mode",title:"Aperçu sur le coté"},{name:"fullscreen",action:EasyMDE.toggleFullScreen,className:"fa fa-arrows-alt no-disable no-mobile disable-for-textarea-mode",title:"Plein écran"}]});if(null!=m&&localStorage["smde_"+n]!==o.defaultValue){const t=e('<div class="alert-box info"></div>'),a=e("<a>Masquer l'alerte</a>");a.attr({href:"javascript:void(0)",class:"close-alert-box ico-after cross white",title:"Masquer l'alerte (raccourci clavier: Echap)"});const i=e('<a href="javascript:void(0)">cliquant ici</a>.').click((function(){window.editors[o.id].value(o.defaultValue),u.codemirror.off("keyHandled",l),localStorage.removeItem("smde_"+n),t.hide(()=>e(this).remove())}));i.attr({href:"javascript:void(0)",title:"Revenir à la version originale (non sauvegardée)"});const l=(a,i)=>("Ctrl-Z"!==i&&"Esc"!==i||(u.codemirror.off("keyHandled",l),t.hide(()=>e(this).remove())),!0);u.codemirror.on("keyHandled",l);const c=["La version actuelle du contenu provient d'une sauvegarde de votre navigateur. ","Vous pouvez revenir à la version originale (du serveur) en ",i,"."];e("<span></span>").append(c).appendTo(t).after(a),r.find(".editor-toolbar").before(t)}function p(e){""!==e.getValue()&&(localStorage.removeItem("smde_"+n),r.submit())}window.editors[this.id]=u,window.editors[this.id].timeout=0,window.editors[this.id].previous_value="",u.codemirror.addKeyMap({"Ctrl-Enter":p}),u.codemirror.addKeyMap({"Cmd-Enter":p}),u.codemirror.addKeyMap({"Ctrl-S":()=>{t.length&&window.saveFormNoRedirect(e(t[0].form),t)}}),u.codemirror.addKeyMap({"Cmd-S":()=>{t.length&&window.saveFormNoRedirect(e(t[0].form),t)}}),this.removeAttribute("required");mirroringEasyMDE(u,o).css("minHeight",d+22+"px"),spellcheckerEasyMDE(u)}))}(jQuery);;
function uploadImage(e,t,a){var i=$(e.target),r=e.originalEvent[t]||window[t],l=[];if(r.files)l=r.files;else if(r.items)for(var s=0;s<r.items.length;s++)0===r.types[s].indexOf("Files")&&l.push(r.items[s].getAsFile());if(!l.length)return!1;var n="/api/galeries/"+document.body.getAttribute("data-gallery")+"/images/",o=function(e){var t=$("<div>",{text:e,class:"alert-box error"});t.append('<a href="#hidealert" class="close-alert-box close-alert-box-text">Cacher</a>');var a=document.documentElement.scrollTop,r=a+$(window).height(),l=t.offset().top,s=l+t.outerHeight(),n=function(e){$("body, html").animate({scrollTop:e},1e3)};return l<a?n(l):r<s&&n(s-$(window).height()),t.insertAfter(i)};return Object.values(l).forEach((function(e){var t=e.size/1024;if(0!==e.type.indexOf("image"))return o("Le format d'image est invalide !");if(t>1024)return o("Votre image est trop lourde ("+t+" Kio). La taille maximum est de 1024.0 Kio !");var r="!["+e.name+" en cours de téléchargement]()",l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");i.val(i.val()+"\n"+r);var s=new FormData;s.append("physical",e),s.append("title",e.name),$.ajax({url:n,data:s,type:"POST",processData:!1,contentType:!1,headers:{"X-CSRFToken":a},dataType:"json"}).done((function(e){var t="!["+e.legend+"]("+e.url+")";i.val(i.val().replace(new RegExp(l),t)),i[0].dispatchEvent(new Event("update"))})).fail((function(e){var t="Erreur inconnue";void 0!==e.responseText&&-1!==e.responseText.indexOf("RequestDataTooBig")?t="L'image est trop lourde.":void 0!==e.responseJSON?t=e.responseJSON[0]:void 0!==e.responseText?t="Erreur "+e.status+" "+e.statusText+' : "'+e.responseText.split("\n")[0]+'"':0===e.readyState&&"error"===e.statusText&&(t="Oups ! Impossible de se connecter au serveur."),o(t),i.val(i.val().replace(new RegExp(l),""))}))})),!0}!function(e,t,a){"use strict";if("old"===localStorage.getItem("editor_choice")){var i,r={buttons:"bold,italic,strike,abbr,key,monospace#sup,sub#center,right#ul,ol#titles,blockcode,image,quote,link#infoblocks,chars,smilies",tags:{bold:{title:"Gras",start:"**",end:"**",useless:!0},italic:{title:"Italique",start:"*",end:"*",useless:!0},strike:{title:"Barré",start:"~~",end:"~~",useless:!0},sup:{title:"Exposant",start:"^",end:"^"},sub:{title:"Indice",start:"~",end:"~"},abbr:{title:"Abréviation"},key:{title:"Touche",start:"||",end:"||"},titles:{title:"Titres",action:"buildTitles"},ul:{title:"Liste à puces"},ol:{title:"Liste ordonnée"},center:{title:"Aligner au centre",start:"-> ",end:" <-"},right:{title:"Aligner à droite",start:"-> ",end:" ->",useless:!0},quote:{title:"Citation"},image:{title:"Image"},link:{title:"Lien"},table:{title:"Tableau"},infoblocks:{title:"Blocs spéciaux",action:"buildInfoblocks"},information:{title:"Bloc Information"},question:{title:"Bloc Question"},attention:{title:"Bloc Attention"},error:{title:"Bloc Erreur"},neutre:{title:"Bloc Neutre"},secret:{title:"Bloc masqué"},monospace:{title:"Code inline",start:"`",end:"`"},blockcode:{title:"Bloc de code coloré",action:"buildCode"},math:{title:"Formule mathématique",start:"$",end:"$"},hr:{title:"Ligne horizontalle",start:"\n\n------\n\n",end:"",useless:!0},chars:{title:"Caractères spéciaux",action:"buildChars"},smilies:{title:"Smileys",action:"buildSmilies",useless:!0},footnote:{title:"Note en bas de page"}},codes:{Web:{html:{title:"HTML"},css:{title:"CSS"},js:{title:"Javascript"},php:{title:"PHP"},jfx:{title:"JavaFX"},pl:{title:"Perl"},sql:{title:"SQL"},xml:{title:"XML"}},Prog:{arduino:{title:"Arduino"},c:{title:"C"},cpp:{title:"C++"},csharp:{title:"C#"},java:{title:"Java"},hs:{title:"Haskell"},py:{title:"Python"},ruby:{title:"Ruby"},vbnet:{title:"VB.NET"}},Autres:{bash:{title:"Bash"},diff:{title:"Diff"},scala:{title:"Scala"},groovy:{title:"Groovy"},ps:{title:"PowerShell"},text:{title:"Autre"}}},chars:{Typo:{char_g0:{title:"« »",start:"« ",end:" »"},char_gl:{title:"« ",start:"« ",end:""},char_gr:{title:" »",start:" »",end:""},char_h0:{title:"“ ”",start:"“",end:"”"},char_hl:{title:"“",start:"“",end:""},char_hr:{title:"”",start:"”",end:""},char_su:{title:"…",start:"…",end:""},char_ti:{title:"−",start:"−",end:""},char_ca:{title:"—",start:"—",end:""}},"Caractères":{char_in:{title:"Insécable",start:" ",end:""},char_ag:{title:"À",start:"À",end:""},char_cc:{title:"Ç",start:"Ç",end:""},char_ea:{title:"É",start:"É",end:""},char_eg:{title:"È",start:"È",end:""},char_oe:{title:"œ",start:"œ",end:""},char_eo:{title:"Œ",start:"Œ",end:""}}},smilies:{0:{smiley_sm:{title:":)",start:":)",end:"",image:"/static/smileys/svg/smile.svg"},smiley_he:{title:":D",start:":D",end:"",image:"/static/smileys/svg/heureux.svg"},smiley_cl:{title:";)",start:";)",end:"",image:"/static/smileys/svg/clin.svg"},smiley_la:{title:":p",start:":p",end:"",image:"/static/smileys/svg/langue.svg"},smiley_ri:{title:":lol:",start:":lol:",end:"",image:"/static/smileys/svg/rire.svg"},smiley_un:{title:":euh:",start:":euh:",end:"",image:"/static/smileys/svg/unsure.svg"},smiley_tr:{title:":(",start:":(",end:"",image:"/static/smileys/svg/triste.svg"},smiley_hu:{title:":o",start:":o",end:"",image:"/static/smileys/svg/huh.svg"},smiley_ib:{title:":B",start:":B",end:"",image:"/static/smileys/svg/b.svg"}},1:{smiley_c1:{title:":colere2:",start:":colere2:",end:"",image:"/static/smileys/svg/mechant.svg"},smiley_oo:{title:"o_O",start:"o_O",end:"",image:"/static/smileys/svg/blink.svg"},smiley_uu:{title:"^^",start:"^^",end:"",image:"/static/smileys/svg/hihi.svg"},smiley_si:{title:":-°",start:":-°",end:"",image:"/static/smileys/svg/siffle.svg"},smiley_an:{title:":ange:",start:":ange:",end:"",image:"/static/smileys/svg/ange.svg"},smiley_c2:{title:":colere:",start:":colere:",end:"",image:"/static/smileys/svg/angry.svg"},smiley_di:{title:":diable:",start:":diable:",end:"",image:"/static/smileys/svg/diable.svg"},smiley_ma:{title:":magicien:",start:":magicien:",end:"",image:"/static/smileys/svg/magicien.svg"}},2:{smiley_ni:{title:":ninja:",start:":ninja:",end:"",image:"/static/smileys/svg/ninja.svg"},smiley_gd:{title:">_<",start:">_<",end:"",image:"/static/smileys/svg/pinch.svg"},smiley_pi:{title:":pirate:",start:":pirate:",end:"",image:"/static/smileys/svg/pirate.svg"},smiley_pl:{title:":'(",start:":'(",end:"",image:"/static/smileys/svg/pleure.svg"},smiley_ro:{title:":honte:",start:":honte:",end:"",image:"/static/smileys/svg/rouge.svg"},smiley_so:{title:":soleil:",start:":soleil:",end:"",image:"/static/smileys/svg/soleil.svg"},smiley_ww:{title:":waw:",start:":waw:",end:"",image:"/static/smileys/svg/waw.svg"},smiley_zz:{title:":zorro:",start:":zorro:",end:"",image:"/static/smileys/svg/zorro.svg"}}},titles:{link:"Lien hypertexte",abbr:"Abréviation",image:"Image"},isExecuted:!1,selection:null,currentElemPopup:null,addEvent:function(e,t,a){e.addEventListener?e.addEventListener(t,a,!1):e.attachEvent("on"+t,a)},init:function(){for(var a in this.smilies)for(var i in this.smilies[a]){var r=this.smilies[a][i];r.start=" "+r.start+" "}for(var l,s=this,n=t.getElementsByTagName("textarea"),o=0,c=n.length;o<c;o++)/md.editor/.test(n[o].className)&&this.setup(n[o].id);this.addEvent(t.getElementById("content"),"DOMNodeInserted",(l=this,function(e){/md.editor/.test(e.target.className)&&l.setup(e.target.id)}));var d=t.createElement("a");function m(e){var t=d.cloneNode(!0);return t.addEventListener("click",s.validatePopup.bind(s,e)),t}d.className="btn btn-submit",d.innerHTML="Valider",d.href="javascript:;",this.modals={},this.modals.link=new e.Modal({title:this.titles.link,body:"<div><label for=zform-modal-link-href>Lien :</label><input type=text id=zform-modal-link-href /></div><div><label for=zform-modal-link-text>Texte :</label><input type=text id=zform-modal-link-text /></div>",footer:m("link")}),this.modals.image=new e.Modal({title:this.titles.image,body:"<div><label for=zform-modal-image-src>URL :</label><input type=text id=zform-modal-image-src /></div><div><label for=zform-modal-image-text>Texte :</label><input type=text id=zform-modal-image-text /></div>",footer:m("image")}),this.modals.abbr=new e.Modal({title:this.titles.abbr,body:"<div><label for=zform-modal-abbr-abbr>Abréviation :</label><input type=text id=zform-modal-abbr-abbr /></div><div><label for=zform-modal-abbr-text>Texte :</label><input type=text id=zform-modal-abbr-text /></div>",footer:m("abbr")})},setup:function(e){var a=t.getElementById(e),i=t.createElement("ul"),r=this;i.className="zform-toolbar hide-for-small",a.parentNode.insertBefore(i,a),this.isExecuted||(this.addEvent(t,"click",(function(e){if(~e.target.className.indexOf("zform-button")&&!~e.target.className.indexOf("zform-subbutton"))return e.stopPropagation();for(var a=t.getElementsByClassName("zform-popup"),i=0;a[i];)"dontclose"===a[i].getAttribute("data-zform-info")&&"textarea"!==e.target.nodeName.toLowerCase()||(a[i].style.display="none",r.currentElemPopup=a[i]==r.currentElemPopup?null:r.currentElemPopup),i++}),!1),this.isExecuted=!0);for(var l,s,n,o=this.buttons.split("#"),c=0,d=o.length;c<d;c++){for(var m=0,u=(l=o[c].split(",")).length;m<u;m++)(n=this.tags[l[m]])?s=i.appendChild(t.createElement("li")).appendChild(this.createButton(n,{display:"button",type:l[m],textarea:e})):alert("La valeur '"+l[m]+"' n'est pas reconnue comme étant une valeur correcte pour un bouton de zForm ! Corrigez votre syntaxe.");s.style.marginRight="20px"}},createButton:function(e,a){var i,r,l,s,n,o,c=t.createElement("button"===a.display?"a":"span");if(c.className="button"===a.display?"ico-after zform-button zform-button-"+a.type:"zform-subbutton-span-"+a.type,e.useless&&(c.className+=" zform-button-useless"),c.setAttribute("data-zform-textarea",a.textarea),c.title=e.title,c.innerHTML=e.title,"span"===a.display&&(c.style.display="block"),e.hasOwnProperty("image")&&(c.innerHTML='<img src="'+e.image+'" alt="'+e.title+'" />'),e.action){var d=this;c.style.position="relative",this.currentElemPopup&&(c.removeChild(this.currentElemPopup),this.currentElemPopup=null),this.addEvent(c,"click",(function(e,a){if(e.preventDefault(),a=this.getElementsByTagName("div")[0]){a.style.display="block";var i=t.getElementById("content").offsetWidth,r=a.offsetParent.offsetLeft+a.offsetWidth<=i;a.style.left=r?"0":"inherit",a.style.right=r?"inherit":"0";var l=a.offsetParent.offsetLeft,s=l-a.offsetWidth;if(!r&&s<0){a.style.right="inherit";var n=-l;n+=Math.max((i-a.offsetWidth)/2,0),a.style.left=n+"px"}d.currentElemPopup&&(d.currentElemPopup.style.display="none"),d.currentElemPopup==a?d.currentElemPopup=null:d.currentElemPopup=a}})),(i=c.appendChild(t.createElement("div"))).className="zform-popup",i.style.position="absolute",i.style.display="none",i.style.left="0",i.style.width="auto",i.style.whiteSpace="nowrap",i.style.textAlign="left",i=this[e.action](i,e,a.textarea)}else this.addEvent(c,"click",(r=e,l=a.textarea,s=this,n=a.type,o=a.extra,function(e){s.wrap(r.start,r.end,l,n,o),this.style.fontWeight="bold"}),!1);return c},openPopup:function(e){return this.modals[e].open(),!1},closePopup:function(){e.Modal.closeCurrent()},validatePopup:function(e){e=e||this.selection.type,this.selection&&this.selection.type&&this.wrap("___","+++",this.selection.textareaId,e,null,!0),this.closePopup()},buildTitles:function(e,a,i,r){for(var l=1;l<=4;l++)(r=e.appendChild(t.createElement("a"))).className="ico-after zform-button zform-subbutton zform-button-title"+l,r.title="Titre de niveau "+l,r.innerText="Titre de niveau "+l,this.addEvent(r,"mousedown",function(e,t,a){return function(i){i.preventDefault(),e.wrap("","",t,a)}}(this,i,"title"+l),!1);return e},buildInfoblocks:function(e,a,i,r){for(var l=["information","question","attention","error","neutre","secret"],s=0;s<6;s++)(r=e.appendChild(t.createElement("a"))).className="ico-after zform-button zform-subbutton zform-button-"+l[s],r.title=this.tags[l[s]].title,r.innerText=this.tags[l[s]].title,this.addEvent(r,"mousedown",function(e,t,a){return function(i){i.preventDefault(),e.wrap("","",t,a)}}(this,i,l[s]),!1);return e},buildColumnous:function(e,a,i){var r,l,s;for(var n in i.src)for(s in(r=e.appendChild(t.createElement("div"))).className="zform-code-col",isNaN(n)&&((l=r.appendChild(t.createElement("b"))).style.display="block",l.style.fontWeight="bold",l.innerHTML=n),i.src[n])i.extra=s,r.appendChild(this.createButton(i.src[n][s],i));return e},buildCode:function(e,t,a){return this.buildColumnous(e,t,{textarea:a,src:this.codes,type:"blockcode",display:"span"})},buildChars:function(e,t,a){return this.buildColumnous(e,t,{textarea:a,src:this.chars,type:"chars",display:"span"})},buildSmilies:function(e,t,a){return this.buildColumnous(e,t,{textarea:a,src:this.smilies,type:"smiley",display:"span"})},wrap:function(e,a,i,r,l,s){var n=t.getElementById(i),o=n.scrollTop,c=s?this.selection:{before:null,current:null,after:null,range:null,startTag:e,endTag:a,textareaId:i,type:r,options:l};n.focus(),n.setSelectionRange?(s||(c.before=n.value.substring(0,n.selectionStart),c.current=n.value.substring(n.selectionStart,n.selectionEnd),c.after=n.value.substring(n.selectionEnd)),n.blur(),(c=this.tagType(c,c.type,c.options,s))&&(n.value=c.before+c.startTag+c.current+c.endTag+c.after,n.focus(),n.setSelectionRange(c.before.length+c.startTag.length,c.before.length+c.startTag.length+c.current.length))):(s||(c.range=t.selection.createRange(),c.current=c.range.text),(c=this.tagType(c,c.type,c.options,s))&&(c.range.text=c.startTag+c.current+c.endTag,c.range.moveStart("character",-c.endTag.length-c.current.length),c.range.moveEnd("character",-c.endTag.length),c.range.select())),n.scrollTop=o,n.dispatchEvent(new Event("update"))},tagType:function(e,a,i,r){if(!a)return e;this.selection=e;var l,s,n,o="";function c(e,t){for(var a=e.split("\n"),i=0===t,r=0,l=a.length;r<l;r++)a[r]=(i?++t+".":t)+" "+a[r];return a.join("\n")}switch(a){case"link":if(!r)return n=new RegExp("^(http[s]?:\\/\\/(www\\.)?|ftp:\\/\\/(www\\.)?|www\\.){1}([0-9A-Za-z-\\.@:%_+~#=]+)+((\\.[a-zA-Z]{2,3})+)(/(.)*)?(\\?(.)*)?"),this.openPopup(a),n.test(e.current)?(t.getElementById("zform-modal-link-href").value=e.current,t.getElementById("zform-modal-link-text").value="",t.getElementById("zform-modal-link-text").focus()):(t.getElementById("zform-modal-link-text").value=e.current,t.getElementById("zform-modal-link-href").value="",t.getElementById("zform-modal-link-href").focus()),!1;l=t.getElementById("zform-modal-link-href").value,s=t.getElementById("zform-modal-link-text").value,e.current="["+s+"]("+l+")";break;case"image":if(!r)return n=new RegExp("^(http[s]?:\\/\\/(www\\.)?|ftp:\\/\\/(www\\.)?|www\\.){1}([0-9A-Za-z-\\.@:%_+~#=]+)+((\\.[a-zA-Z]{2,3})+)(/(.)*)?(\\?(.)*)?"),this.openPopup(a),n.test(e.current)?(t.getElementById("zform-modal-image-src").value=e.current,t.getElementById("zform-modal-image-text").value="",t.getElementById("zform-modal-image-text").focus()):(t.getElementById("zform-modal-image-text").value=e.current,t.getElementById("zform-modal-image-src").value="",t.getElementById("zform-modal-image-src").focus()),!1;var d=t.getElementById("zform-modal-image-src").value;s=t.getElementById("zform-modal-image-text").value||"Image utilisateur",e.current="!["+s+"]("+d+")";break;case"quote":e.current=c(e.current,">");break;case"information":case"attention":case"question":case"secret":e.current="[["+a+"]]\n"+c(e.current,"|");break;case"error":e.current="[[erreur]]\n"+c(e.current,"|");break;case"neutre":e.current="[["+a+"|Titre]]\n"+c(e.current,"|");break;case"ul":e.current=c(e.current,"-");break;case"ol":e.current=c(e.current,0);break;case"title1":case"title2":case"title3":case"title4":for(var m=0,u=parseInt(a.charAt(5));m<u;m++)o+="#";e.current=e.current.replace(/^\s*?/,o+" ");break;case"footnote":if(!e.current)return;(o=prompt("Entrez la signification de cette abréviation"))&&(e.after+="\n\n*["+e.current+"]: "+o);break;case"abbr":if(this.openPopup(a),r){var g=t.getElementById("zform-modal-abbr-text").value;""===g.trim()&&(g=t.getElementById("zform-modal-abbr-abbr").value),e.after+="\n\n*["+t.getElementById("zform-modal-abbr-abbr").value+"]: "+g}else e.current.length<10?(t.getElementById("zform-modal-abbr-abbr").value=e.current,t.getElementById("zform-modal-abbr-text").value="",t.getElementById("zform-modal-abbr-text").focus()):(t.getElementById("zform-modal-abbr-text").value=e.current,t.getElementById("zform-modal-abbr-abbr").value="",t.getElementById("zform-modal-abbr-abbr").focus());break;case"blockcode":e.startTag="```"+e.options+(0===e.current.indexOf("\n")?"":"\n"),e.endTag="\n```"}return e.startTag||(e.startTag=""),e.endTag||(e.endTag=""),e}};r.addEvent(t,"DOMContentLoaded",(i=r,function(){i.init()}))}}(window,document),function(e,t){"use strict";if("old"===localStorage.getItem("editor_choice")){var a=e("input[name=csrfmiddlewaretoken]").val(),i=0;e(".md-editor").on("keydown",(function(t){!t.ctrlKey&&!t.metaKey||13!==t.which||t.altKey||t.shiftKey||(t.preventDefault(),e(".message-submit > button[name=answer]").click())})).on("dragenter",(function(t){i++,t.preventDefault(),1===i&&e(t.target).addClass("selected")})).on("dragover",(function(e){e.preventDefault()})).on("dragleave",(function(t){i--,t.preventDefault(),0===i&&e(t.target).removeClass("selected")})).on("drop",(function(t){t.preventDefault(),uploadImage(t,"dataTransfer",a),e(t.target).removeClass("selected"),i=0})).on("paste",(function(e){var t=e.originalEvent.clipboardData;(t.files||t.items).length&&uploadImage(e,"clipboardData",a)&&e.preventDefault()}))}}(jQuery),function(e){"use strict";var t;"old"===localStorage.getItem("editor_choice")&&(t=e.querySelectorAll(".md-editor"),Array.prototype.slice.call(t)).forEach((function(e){e.getAttribute("name");var t=(window.location.pathname+window.location.search+"@"+e.getAttribute("name")).replace(/[?|&]page=(\d+)/g,""),a=e.closest("form"),i=localStorage.getItem("smde_"+t);function r(){""===e.value?localStorage.removeItem("smde_"+t):localStorage.setItem("smde_"+t,e.value)}i&&!e.value&&(e.value=i),e.addEventListener("input",r),e.addEventListener("update",r),a.addEventListener("submit",(function(){localStorage.removeItem("smde_"+t)}))}))}(document),"old"===localStorage.getItem("editor_choice")&&$(".message-bottom [data-ajax-input='preview-message'], .preview-btn").on("click",(function(e){e.stopPropagation(),e.preventDefault();var t=$(this),a=t.parents("form:first"),i="";if(a.find(".preview-source").length){var r=t.parent().prev().find(".preview-source");i=r.val()}else i=a.find("textarea[name=text]").val();var l=a.find("input[name=csrfmiddlewaretoken]").val(),s=a.find("input[name=last_post]").val();$.ajax({url:a.attr("action"),type:"POST",data:{csrfmiddlewaretoken:l,text:i,last_post:s,preview:"preview"},success:function(e){$(".previsualisation").remove(),void 0===r?$(e).insertAfter(a):$(e).insertAfter(t)}})}));;
!function(t){t(".featured-request").on("click",".unpick-action",(function(){const e=t(this),n=e.parent().parent(),r=n.parent(),a=t("input[name='csrfmiddlewaretoken']").val(),o=e.data("operation"),i={csrfmiddlewaretoken:a};o&&(i.operation=e.data("operation")),t.post(e.attr("data-url"),i).done((function(t){"OK"===t.result?"REJECT"===o||"REJECT_FOR_GOOD"===o?(n.remove(),0===r.find("tr").length&&r.append('<tr><td colspan="4"><i>Plus rien à afficher pour le moment !</i></td></tr>')):(e.toggleClass("cross hide"),e.text("Ignorer"),e.data("operation","REJECT")):e.prop("disabled",!0)}))}))}(jQuery);;
!function(e){function r(e){return e.replace(" ;","&#8239;;").replace(" ?","&#8239;?").replace(" !","&#8239;!").replace(" %","&#8239;%").replace("« ","«&nbsp;").replace(" »","&nbsp;»").replace(" :","&nbsp;:")}function t(e,r){let t=r;return e.length>0&&(t+=" par "+e),t}e(".featured-resource-edit-form form input").on("change input",(function(){!function(r,t){const i=e(t);r.image?i.find(".featured-resource-illu").show().attr("src",r.image):i.find(".featured-resource-illu").hide(),i.find("h2").html(r.title),i.find(".featured-resource-description").html(r.description),i.find("a").attr("href",r.link)}({image:e(".featured-resource-edit-form input[name=image_url]").val(),title:r(e(".featured-resource-edit-form input[name=title]").val()),description:t(e(".featured-resource-edit-form input[name=authors]").val(),r(e(".featured-resource-edit-form input[name=type]").val())),link:e(".featured-edit-form input[name=url]").val()},e(".featured-resource-edit-form .featured-resource-item"))}))}(jQuery);;
!function(e){"use strict";if(e("body").hasClass("form-email-username")){const a=e("#id_email"),d=e("#form-email"),s=e("[data-form-email-username-button=email]"),n=e("#id_username"),l=e("#form-username"),i=e("[data-form-email-username-button=username]");""===a.val()?d.addClass("hidden"):d.removeClass("hidden"),s.on("click",(function(e){d.toggleClass("hidden"),l.addClass("hidden"),n.val(""),e.preventDefault()})),""===n.val()?l.addClass("hidden"):l.removeClass("hidden"),i.on("click",(function(e){l.toggleClass("hidden"),d.addClass("hidden"),a.val(""),e.preventDefault()}))}}(jQuery);;
!function(e){"use strict";const s=e(".toggle-gallery-view"),l=e(".gallery"),t=function(){s.text(l.hasClass("list-view")?"Vue grille":"Vue liste")};s.length>0&&(s.on("click",(function(){l.hasClass("list-view")?l.removeClass("list-view").addClass("grid-view"):l.removeClass("grid-view").addClass("list-view"),t()})),t());const i=function(){this.checked?e(this).parents(".gallery-item").addClass("selected"):e(this).parents(".gallery-item").removeClass("selected")};l.length>0&&e(".gallery-item input[type=checkbox]").on("change",i).each(i)}(jQuery);;
document.documentElement.classList.add("js");;
!function(e){"use strict";function t(t){let n,a,r;const i=t.nodeName.toLowerCase(),u=!isNaN(e.attr(t,"tabindex"));return"area"===i?(n=t.parentNode,a=n.name,!(!t.href||!a||"map"!==n.nodeName.toLowerCase())&&(r=e("img[usemap='#"+a+"']")[0],!!r&&o(r))):(/input|select|textarea|button|object/.test(i)?!t.disabled:"a"===i&&t.href||u)&&o(t);function o(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter((function(){return"hidden"===e.css(this,"visibility")})).length}}e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo((function(t){return function(n){return!!e.data(n,t)}})):function(t,n,a){return!!e.data(t,a[3])},focusable:function(n){return t(n,isNaN(e.attr(n,"tabindex")))},tabbable:function(n){const a=e.attr(n,"tabindex"),r=isNaN(a);return(r||a>=0)&&t(n)}})}(jQuery);;
!function(t){"use strict";const e=function(t){if(this.message=t,!this.message.is(".topic-message"))throw new Error("Target is not a .topic-message");this.init(),this.message.data("karma",this)};e.prototype={updateInterval:3e4,init:function(){this.karmaElem=this.message.find(".message-karma"),this.karmaURI=this.karmaElem.data("karma-uri"),this.csrf=t("input[name=csrfmiddlewaretoken]").val(),this.like={},this.dislike={},this.like.button=this.karmaElem.find(".upvote"),this.dislike.button=this.karmaElem.find(".downvote"),this.like.tooltip=this.like.button.tooltip(this.like.button.hasClass("has-vote")?"Chargement...":""),this.dislike.tooltip=this.dislike.button.tooltip(this.dislike.button.hasClass("has-vote")?"Chargement...":""),t(this.like.tooltip.elem).add(this.dislike.tooltip.elem).on("click",this.showDetails.bind(this)),this.like.listElem=t("<ul>",{class:"vote-list like"}),this.dislike.listElem=t("<ul>",{class:"vote-list dislike"}),this.canVote=this.karmaElem.hasClass("can-vote"),this.updateInterval=3e4,this.canVote&&(this.like.button.on("click",this.vote.bind(this,"like")),this.dislike.button.on("click",this.vote.bind(this,"dislike"))),this.like.button.on("mouseover",this.regularUpdate.bind(this)),this.dislike.button.on("mouseover",this.regularUpdate.bind(this)),this.like.button.hasClass("voted")?this.currentVote="like":this.dislike.button.hasClass("voted")?this.currentVote="dislike":this.currentVote="neutral"},vote:function(e,s){e===this.currentVote&&(e="neutral"),t.ajax({method:"PUT",url:this.karmaURI,data:{vote:e},headers:{"X-CSRFToken":this.csrf}}).done(this.update.bind(this)),s&&(s.preventDefault(),s.stopPropagation())},fetchUpdate:function(){const e=this;this.updating||(this.updating=!0,t.getJSON(this.karmaURI).done(this.update.bind(this)).always((function(){e.updating=!1})))},regularUpdate:function(){(!this.lastUpdate||this.lastUpdate+this.updateInterval<Date.now())&&(this.fetchUpdate(),this.lastUpdate=Date.now())},update:function(t){this.updateOne(t,"like","dislike"),this.updateOne(t,"dislike","like"),this.currentVote=t.user},updateOne:function(e,s,i){e[s].count>0?this[s].button.addClass("has-vote"):this[s].button.removeClass("has-vote"),e[s].count>e[i].count?this[s].button.addClass("more-voted"):this[s].button.removeClass("more-voted"),e.user===s?this[s].button.addClass("voted"):this[s].button.removeClass("voted");let a,n=e[s].count+" personne";if(1===e[s].count&&"like"===s?n+=" a":1===e[s].count&&"dislike"===s?n+=" n'a pas":n+="like"===s?"s ont":"s n'ont pas",n+=" trouvé ce message utile",this.canVote?(a="Ce message "+("like"===s?"est":"n'est pas")+" utile",0!==e[s].count&&(a+=" ("+n+")")):a=n,this[s].button.attr("title",a),this[s].button.text(("like"===s?"+":"-")+e[s].count),Object.hasOwnProperty.call(e[s],"users")){const i=e[s].users.slice(0,9),a=e[s].count-i.length,n=t("#my-account .username").text(),o=i.map((function(t){return t.username===n?"Vous ("+t.username+")":t.username}));if(a>0){let t=o.length>0?"et "+a+" autre":a+" vote";1!==a&&(t+="s"),o.push(t)}if(this[s].tooltip.setContent(o.map((function(e){return t("<div>",{text:e})}))),this[s].listElem.empty(),0===e[s].count)t("<li>",{class:"muted",text:"Pas de votes "+("like"===s?"positifs":"négatifs")}).appendTo(this[s].listElem);else{this[s].listElem.append(e[s].users.map((function(e){return t("<li>").append(t("<a>",{href:e.html_url,text:e.username}).prepend(t("<img />",{src:e.avatar_url})))})));const i=e[s].count-e[s].users.length;i&&t("<li>",{text:i+" anonyme"+(1===i?"":"s"),class:"muted"}).appendTo(this[s].listElem)}}},showDetails:function(){if(!this.detailsModal){const e=t("<div>",{class:"vote-details"}).append(t("<div>",{class:"vote-col"}).append(t("<h3>",{text:"Votes positifs"})).append(this.like.listElem)).append(t("<div>",{class:"vote-col"}).append(t("<h3>",{text:"Votes négatifs"})).append(this.dislike.listElem));this.detailsModal=new window.Modal({title:"Détail des votants",titleIcon:"hide light",body:e,closeText:"Fermer"})}this.detailsModal.open()}},t.fn.karma=function(){if(1!==this.length)return t(this).map((function(e,s){return t(s).karma()}));{let s;s=t(this).is(".topic-message")?t(this):t(this).parents(".topic-message");const i=s.data("karma");return i||new e(s)}},t(document).ready((function(){t(".topic-message").has(".message-karma").karma()}))}(jQuery);;
!function(e){"use strict";e(document).ready((function(){let n=e("#content .navigable-list");if(n.length>0){const t=n.find(".navigable-elem");e("body").on("keydown",(function(a){if(!e(document.activeElement).is(":input")&&(74===a.which||75===a.which)){const e=n.find(".navigable-elem.active");let l=null;if(1===e.length){const n=t.index(e);75===a.which?n>0&&(l=n-1):n+1<t.length&&(l=n+1)}else l=0;null!==l&&(e.removeClass("active"),i(t.eq(l)))}})),e("#content .navigable-list").on("focus",".navigable-link",(function(){e(this).parents(".navigable-elem:first").hasClass("active")||(n.find(".navigable-elem.active").removeClass("active"),i(e(this).parents(".navigable-elem")))})).on("blur",".navigable-link",(function(){e(this).parents(".navigable-elem:first").removeClass("active")}))}function i(e){e.addClass("active").find(".navigable-link").focus()}e("#content").on("DOMNodeInserted",".navigable-list, .navigable-elem",(function(){n=e("#content .navigable-list")}))}))}(jQuery);;
!function(e){"use strict";const o=["les simples retours à la ligne ne sont pas pris en compte. Pour créer un nouveau paragraphe, pensez à <em>sauter une ligne</em> !","encadrez votre texte par une astérisque pour écrire en italique ou deux pour du gras.","pour écrire un lien, utilisez la syntaxe <code>[texte de lien](url du lien)</code>","les blocs de code sont délimités par trois accents graves <code>```</code>.","pour créer une liste à puces, sautez une ligne et commencez chaque élément de la liste par <code>+</code>, <code>-</code> ou <code>*</code>.","pour citer quelqu'un, utilisez le symbole <code>></code>.","pour tracer une ligne, utilisez <code>---</code>, <code>+++</code> ou <code>***</code>.","pour aller à la ligne sans changer de paragraphe, finissez votre première ligne par deux espaces.","pour écrire un bout de code au milieu d’une phrase, utilisez la syntaxe <code>`un bout de code`</code>.",'le langage d’un bloc de code peut être spécifié après les <code>```</code> ouvrants. <a href="https://github.com/highlightjs/highlight.js/blob/master/SUPPORTED_LANGUAGES.md">La liste des langages supportés est disponible ici.</a>','vous pouvez <a href="//zestedesavoir.com/tutoriels/244/comment-rediger-des-maths-sur-zeste-de-savoir/">écrire des formules mathématiques</a> en encadrant ces dernières du signe dollar <code>$</code>.',"pour ajouter une image, vous pouvez simplement la glisser-déposer depuis votre explorateur.","vous pouvez préciser à quel numéro commencent les lignes avec cette syntaxe : <code>```python linenostart=42</code> au début d'un bloc de code. Pratique pour faire coïncider les numéros de ligne à une erreur, par exemple.","vous pouvez surligner des lignes avec cette syntaxe : <code>```rust hl_lines=2,4-7</code> au début d'un bloc de code.","vous pouvez à la fois choisir à quel numéro démarrent les lignes et en surligner avec <code>```lisp linenostart=244 hl_lines=247,252</code> au début d'un bloc de code."];function r(r){r.each((function(){const r=e("<div/>",{class:"markdown-help",html:"<strong>Astuce :</strong> "+o[Math.floor(Math.random()*o.length)]+" <a href=\"//zestedesavoir.com/tutoriels/221/rediger-sur-zds/\">Envie d'en savoir plus ?</a><a href='#close-alert-box' class='close-alert-box ico-after cross'>Masquer</a>"});e(this).after(r)}))}e(document).ready((function(){e("body").data("show-markdown-help")&&("new"===localStorage.getItem("editor_choice")?r(e(".editor-statusbar")):r(e(".md-editor")),e("#content").on("DOMNodeInserted",".md-editor",(function(o){const s=e(o.target);!1===s.next().hasClass("markdown-help")&&r(s)})))}))}(jQuery);;
!function(){"use strict";window.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("article.topic-message .message header aside.message-actions ul").forEach(e=>{let t=!1;const a=(e,t)=>{(function(e,t){return Array.prototype.some.call(e.getElementsByTagName("*"),e=>(t||document.activeElement)===e)})(e,t.relatedTarget)||e.classList.remove("is-active")};e.addEventListener("focus",a=>{if(e.classList.add("is-active"),!t){const t=e.querySelector("li:first-child a");t&&t.focus()}}),e.addEventListener("blur",s=>{a(e,s),t=!1}),Array.prototype.forEach.call(e.getElementsByTagName("*"),s=>{s.addEventListener("blur",s=>{a(e,s),t=!0})})})})}();;
!function(e){"use strict";function n(){let n=e(this).next(),t=0;do{n.toggleClass("hidden"),n=n.next(),t++}while(n[0]&&n.hasClass("hidden-by-someone"));return t}e("div.msg-are-hidden.hidden").each((function(){const t=e(this),s=t.children("a"),a=n.apply(this);t.removeClass("hidden"),1===a?s.text(s.data("message-singular")):s.text(s.data("message-plural").replace("{n}",a)),t.children("a").click((function(){return n.apply(this.parentNode),!1}))}))}(jQuery);;
!function(){"use strict";const e=document.querySelectorAll("article.topic-message header aside.message-actions ul li");for(const t of e){const e=t.parentElement;t.addEventListener("touchend",t=>{e.classList.contains("is-active")||(t.preventDefault(),e.classList.add("is-active"))}),document.addEventListener("touchend",s=>{e.classList.contains("is-active")&&null===s.target.closest("article.topic-message header aside.message-actions ul")&&(s.preventDefault(),e.classList.remove("is-active"),t.querySelector(":first-child").blur(),t.blur(),e.blur())})}}();;
!function(e){"use strict";const t=navigator.userAgent,n=t.indexOf("Android")>-1&&t.indexOf("Mozilla/5.0")>-1&&t.indexOf("AppleWebKit")>-1,i=/AppleWebKit\/([\d.]+)/,o=null===i.exec(t)?null:parseFloat(i.exec(t)[1]),s=n&&null!==o&&o<537;s&&e("html").removeClass("enable-mobile-menu");let l="";const a=["transform","msTransform","MozTransform","WebkitTransform","OTransform"],m=["","-ms-","-moz-","-webkit-","-o-"],r=document.createElement("div");for(let e=0;e<a.length;++e)if(void 0!==r.style[a[e]]){l=m[e];break}function c(t,n){if(t.hasClass("mobile-menu-imported"))return!1;if(n)return t.addClass("mobile-menu-imported"),t=t.clone().removeAttr("id").appendTo("#mobile-menu");const i=e("<div/>");i.addClass("mobile-menu-bloc"),i.attr("data-title",t.attr("data-title")),t.hasClass("mobile-show-ico")&&i.addClass("mobile-show-ico");const o=t.hasClass("mobile-all-links");let s=t.find(o?"a, button, span.disabled":".mobile-menu-link");return o&&(s=s.not(".action-hover")),s.each((function(){if(0===e(this).parents(".mobile-menu-imported, .modal").length){const t=e(this).clone().addClass("light");let n;if(e(this).is("button")){const i=e(this).parents("form:first");i.attr("id")?n=i.attr("id"):(n="form"+e(".identified-form").length,i.attr("id",n).addClass("identified-form")),t.attr("form",n)}i.append(t)}})),o&&i.find("a, button, span.disabled").addClass("mobile-menu-link"),t.addClass("mobile-menu-imported"),i.appendTo(e("#mobile-menu")),i}function d(t){let n;null===t&&(t=!e("html").hasClass("show-mobile-menu")),e("body").removeClass("swipping");const i=document.querySelector('meta[name="viewport"]');t?e("html").hasClass("show-mobile-menu")||(n=e(document).scrollTop(),e(".page-container").css({"margin-top":"-"+n+"px","padding-bottom":n+"px"}),e("html").addClass("show-mobile-menu"),i.content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, initial-scale=1.0"):(e("html").removeClass("show-mobile-menu"),n=parseInt(e(".page-container").css("padding-bottom")),e(".page-container").css({"margin-top":"","padding-bottom":""}),n>0&&e(document).scrollTop(n),e("body").removeClass("swipping"),setTimeout((function(){e("#mobile-menu").scrollTop(0),i.content="width=device-width, minimum-scale=1.0, initial-scale=1.0",e("html").css({position:"absolute",left:"0"}),setTimeout((function(){e("html").removeAttr("style")}),500)}),200))}l+="transform",e(window).on("resize",(function(){if(parseInt(e("html").css("width"))<1024&&!s){if(e(".page-container").css("width",e("html").css("width")),!e("#mobile-menu").hasClass("initialized")){e("#mobile-menu").addClass("initialized"),e(".mobile-menu-btn").on("click",(function(t){e("html").hasClass("show-mobile-menu")||(d(!0),t.preventDefault(),t.stopPropagation())})),c(e("#search"),!0);c(e("#my-account"),!0).addClass("mobile-menu-link mobile-menu-bloc"),c(e(".header-menu")),e(".page-container .mobile-menu-bloc .mobile-menu-bloc").each((function(){c(e(this))})),e(".page-container .mobile-menu-bloc:not(.my-account-dropdown)").each((function(){c(e(this))})),c(e(".my-account-dropdown"))}if(!e("#mobile-menu").hasClass("initialized-events")){let t=0;const n=50;let i=!1;e("body").on("touchstart",(function(n){t=parseInt(n.originalEvent.touches[0].pageX,10)-e(".page-container").offset().left})),e(".page-container").on("touchmove",(function(o){if(i||parseInt(o.originalEvent.touches[0].pageX,10)-e(this).offset().left<n){o.preventDefault(),e("body:not(.swipping)").addClass("swipping"),i=!0;let n=parseInt(o.originalEvent.touches[0].pageX,10)-t;if(n=100*n/parseInt(e("html").width()),n>0&&n<90){const t={};t[l]="translate3d("+n+"%, 0, 0)",e(this).css(t),n=20*n/90-20,t[l]="translate3d("+n+"%, 0, 0)",e("#mobile-menu").css(t)}}})).on("touchend touchleave touchcancel",(function(){if(i){const t=parseInt(e(this).offset().left),n=parseInt(e("html").width());d(t>n/3&&!e("html").hasClass("show-mobile-menu")||t>n-n/3&&e("html").hasClass("show-mobile-menu")),i=!1,e("body").removeClass("swipping");const o={};o[l]="",e(".page-container, #mobile-menu").css(o)}})),e(".page-container").on("click",(function(t){e("html").hasClass("show-mobile-menu")&&(d(!1),t.preventDefault(),t.stopPropagation())})),e("#mobile-menu").addClass("initialized-events")}}else e("html").removeClass("show-mobile-menu"),e("#mobile-menu").removeClass("initialized-events"),e(".page-container").removeAttr("style"),e(".page-container").off("click touchstart touchmove touchend")})),e(window).trigger("resize"),e(window).on("resize",(function(){if(parseInt(e("html").css("width"))<960&&!s){const t=e(".sidebar .new-btn:not(.mobile-btn-imported)");if(t.length>0){let n=e("#content").find("> .content-wrapper, > .full-content-wrapper, > .content-col-2").first().find("h1, h2").first();n.next(".license").length>0&&(n=n.next(".license")),n.next(".subtitle").length>0&&(n=n.next(".subtitle")),n.next(".taglist").length>0&&(n=n.next(".taglist"));const i=e("<div/>",{class:"new-btn-container"});t.each((function(){i.append(e(this).clone().removeAttr("id").removeClass("blue")),e(this).addClass("mobile-btn-imported")})),n.after(i)}}})),e(window).trigger("resize")}(jQuery);;
!function(){"use strict";const t=document.querySelector("input[name=csrfmiddlewaretoken]");if(!t)return;const e=t.value;for(const t of document.getElementsByClassName("potential-spam-handle"))t.addEventListener("click",(function(){const a=t.getAttribute("data-potential-spam-api"),n="true"===t.getAttribute("data-potential-spam-new-state"),s=t.closest("article"),i=s.querySelector("[data-ajax-output='mark-message-as-potential-spam']");fetch(a,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":e},body:JSON.stringify({is_potential_spam:n})}).then(t=>t.json()).then(e=>{s.classList.toggle("potential-spam",e.is_potential_spam),i.classList.toggle("hidden",!e.is_potential_spam),t.setAttribute("data-potential-spam-new-state",!e.is_potential_spam);const a=t.innerText;t.innerHTML=t.getAttribute("data-content-on-click"),t.setAttribute("data-content-on-click",a),t.blur()})}))}();;
!function(t){"use strict";t("body").on("change",".select-autosubmit",(function(){t(this).parents("form:first").submit()}))}(jQuery);;
!function(t){"use strict";const n=jQuery("#share-to-mastodon"),i=n.find("button");n.find("input[name='instance']").on("change paste keyup",(function(){this.value.startsWith("https://")?i.prop("disabled",!1):i.prop("disabled",!0)})),n.on("submit",(function(){n.attr("action",n.find("input[name='instance']").val()+"/share")}))}();;
!function(){function t(t,i=!1){this.isValentine=i,this._parent=t,this._canvas=document.createElement("canvas");const s=this._canvas;this.resize(),s.style.zIndex=-1,s.style.position="absolute",s.style.left=0,s.style.background=window.getComputedStyle(this._parent).getPropertyValue("background"),this._parent.style.background="transparent",this._parent.children.length>0?this._parent.insertBefore(s,this._parent.children[0]):this._parent.appendChild(s),this._ctx=s.getContext("2d"),this.setup()}t.prototype={SNOW_COLOR:"rgba(255, 255, 255, 0.8)",VALENTINE_SNOW_COLOR:"rgba(255, 154, 133, 1)",MAX_PARTICLES:25,SPAWN_RATE:100,PARTICLES_SPEED:15,PARTICLES_SIZE:2,TURBULENCES_X:1,TURBULENCES_Y:.5,TURBULENCES_SPEED:1,MAX_TIMESHIFT:Math.PI/3,setup:function(){this.particles=[],this._lastSpawn=this._lastLoop=Date.now(),this.loop(),window.addEventListener("resize",this.resize.bind(this))},resize:function(){const t=this._parent.getBoundingClientRect();this.H=t.height,this.W=t.width,this._canvas.height=this.H,this._canvas.width=this.W},spawnParticle:function(){this.particles.push({x:Math.random()*this.W,y:-this.PARTICLES_SIZE,d:Math.random()+1,s:Math.random()*this.MAX_TIMESHIFT})},loop:function(){this.update(),this.draw(),requestAnimationFrame(this.loop.bind(this))},update:function(){let t;const i=Date.now(),s=i-this._lastLoop;for(const e in this.particles)t=this.particles[e],t.y+=s/1e3*(this.PARTICLES_SPEED*t.d*(1.5+Math.sin(i*this.TURBULENCES_SPEED/1e3+t.s)*this.TURBULENCES_Y)),t.x+=s/1e3*(this.PARTICLES_SPEED*t.d*(Math.cos(i*this.TURBULENCES_SPEED/1e3+t.s)*this.TURBULENCES_X)),(t.y-4*t.d>this.H||t.x-4*t.d>this.W||t.x+4*t.d<0)&&this.particles.splice(e,1);this._lastSpawn<=i-this.SPAWN_RATE&&this.particles.length<this.MAX_PARTICLES&&(this._lastSpawn=i,this.spawnParticle()),this._lastLoop=i},draw:function(){let t;this._ctx.clearRect(0,0,this.W,this.H),this.isValentine?this._ctx.fillStyle=this.VALENTINE_SNOW_COLOR:this._ctx.fillStyle=this.SNOW_COLOR,this._ctx.beginPath();for(const i in this.particles)t=this.particles[i],this._ctx.moveTo(t.x,t.y),this.isValentine?(this._ctx.bezierCurveTo(t.x,t.y-.3,t.x-.5,t.y-1.5,t.x-2.5,t.y-1.5),this._ctx.bezierCurveTo(t.x-5.5,t.y-1.5,t.x-5.5,t.y+2.25,t.x-5.5,t.y+2.25),this._ctx.bezierCurveTo(t.x-5.5,t.y+4,t.x-1.5,t.y+4.2,t.x,t.y+8),this._ctx.bezierCurveTo(t.x+3.5,t.y+6.2,t.x+5.5,t.y+4,t.x+5.5,t.y+2.25),this._ctx.bezierCurveTo(t.x+5.5,t.y+2.25,t.x+5.5,t.y-1.5,t.x+2.5,t.y-1.5),this._ctx.bezierCurveTo(t.x+1,t.y-1.5,t.x,t.y-.3,t.x,t.y)):this._ctx.arc(t.x,t.y,t.d*this.PARTICLES_SIZE,0,2*Math.PI,!0);this._ctx.fill()}},window.addEventListener("DOMContentLoaded",(function(){const i=document.body.classList.contains("vc-snow")||!1,s=document.body.classList.contains("vc-valentine-snow")||!1;(i||s)&&setTimeout((function(){window.snow=new t(document.querySelector(".header-container > header"),s)}),1e3)}))}();;
!function(e){"use strict";function t(t){t.each((function(){const t=e(this);if(!t.hasClass("spoiler-build")){let o="Afficher/Masquer le contenu masqué";const s=t.find(".custom-block-heading");s[0]&&(o=s.text()+" (Afficher/Masquer)",s.remove()),t.before(e("<a/>",{text:o,class:"spoiler-title ico-after view",href:"#",click:function(t){e(this).next(".custom-block-spoiler").toggle(),t.preventDefault()}})),t.addClass("spoiler-build")}}))}function o(){for(const e of document.querySelectorAll("details.custom-block-spoiler")){let t=e.querySelector("summary");if(null===t){t=document.createElement("summary"),t.classList.add("custom-block-heading"),t.textContent="Afficher/Masquer le contenu masqué";const o=e.querySelector(".custom-block-body");e.insertBefore(t,o)}t.classList.contains("ico-after")||t.classList.add("ico-after","view","light")}}e(document).ready((function(){const s=e("#content");e("div.spoiler").addClass("custom-block-spoiler"),t(s.find("div.custom-block-spoiler")),o(),s.on("DOMNodeInserted",(function(s){return t(e(s.target).find("div.custom-block-spoiler")),o()}))}))}(jQuery);;
!function(t){"use strict";let s=null;t("body").on("submit","form",(function(){t("[type=submit], [type=reset]").addClass("disabled"),null===s&&(s=t("[type=submit], [type=reset]",t(this))),s.addClass("submitted").append(t("<span/>",{class:"line-loading"}))})),t("form").on("click","[type=submit], [type=reset]",(function(e){s=t(this),t(this).hasClass("disabled")&&e.preventDefault()}))}(jQuery);;
!function(t){"use strict";t("body").on("keydown",(function(e){const n=t(".tab-modalize:visible");if(n.length>0&&9===e.which){const t=n.find(":focus"),i=n.find(":tabbable");let o=e.shiftKey?i.length-1:0;if(1===t.length){const n=i.index(t);e.shiftKey?n>0&&(o=n-1):n+1<i.length&&(o=n+1)}i.eq(o).focus(),e.stopPropagation(),e.preventDefault()}}))}(jQuery);;
!function(t){"use strict";if(!t("#topic-suggest")[0])return;let e=0,a=0;const n=function(){const n=encodeURIComponent(t(this).val());if(n.length<3)return;const l=t("#topic-result-container"),i=t("#topic-suggest").attr("url");!0!==l.data("ajax-load")&&(t.getJSON(i+"?q="+n,(function(n){const i=t("<ul></ul>");let o=null,r=0;clearTimeout(a),clearTimeout(e),t.each(n.results,(function(e,a){o=t("<a></a>").attr("target","_blank"),o.text(a.title).attr("href",a.url).attr("title",a.subtitle);const n=new Date(a.pubdate).toLocaleDateString(),l=t("<a></a>").text(a.forumTitle).attr("href",a.forumUrl).attr("target","_blank");t("<li></li>").text(" dans le forum ").append(l).append(" le "+n).prepend(o).appendTo(i),r++})),r||(t("<li></li>").addClass("neither").text(l.data("neither")).appendTo(i),a=setTimeout((function(){t("#topic-suggest").hide(800)}),6e3)),l.html("").append(i),l.data("ajax-load",!1),t("#topic-suggest").show(800)})),l.data("ajax-load",!0))};t("#id_title").on("blur",n),t("#id_title").on("keypress",(function(){const a=this,l=t(this).val().length;clearTimeout(e),e=setTimeout((function(){n.call(a)}),l<5?200*(12-2*l):2e3)}))}(jQuery);;
!function(t){const n=t(".opinion"),o=t("#opinion-count");n.on("click",".unpick-action",(function(){const n=t(this),e=n.parent().parent(),a={csrfmiddlewaretoken:t("input[name='csrfmiddlewaretoken']").val()};n.data("operation")&&(a.operation=n.data("operation")),t.post(n.attr("data-url"),a).done((function(){if(a.operation)e.remove();else{n.prop("disabled",!0);const t=e.find(".state");t.text(t.data("toggle"))}o.text(parseInt(o.text(),10)-1)}))})),t(".unpublish-opinion").on("click",(function(){const n=t(this),o={csrfmiddlewaretoken:t("input[name='csrfmiddlewaretoken']").val(),operation:"REMOVE_PUB"};confirm(n.data("confirm"))&&t.post(n.data("url"),o).done((function(){alert(n.data("done")),void 0!==n.data("redirect-url")&&n.data("redirect-url")&&(window.location.href=n.data("redirect-url"))}))}))}(jQuery);;
!function(t){"use strict";const o=jQuery("body.userprofilepage .bio-container");if(!o[0])return;const e=o.find(".message-content"),a=o.find(".biography-overflow"),n=a.find("p");e[0].scrollHeight-e.innerHeight()>10?o.addClass("too-long-biography"):o.addClass("full-biography"),a.on("click",(function(){o.toggleClass("full-biography");const t=n.text();n.text(n.attr("data-other-label")),n.attr("data-other-label",t)}))}();;
!function(){const e=document.getElementById("very-top-banner");if(!e)return;const t=e.dataset.slug;function n(){return(localStorage.getItem("hide-very-top-banner")===t||sessionStorage.getItem("hide-very-top-banner")===t)&&(e.remove(),document.body.classList.remove("has-top-banner"),!0)}n()||(document.body.classList.add("has-top-banner"),e.querySelector("button").addEventListener("click",n=>{e.remove(),document.body.classList.remove("has-top-banner"),sessionStorage.setItem("hide-very-top-banner",t),(n.shiftKey||n.ctrlKey)&&localStorage.setItem("hide-very-top-banner",t)}),window.addEventListener("storage",n))}();;
!function(e){"use strict";e(".open-zen-mode").length>0&&(e(".open-zen-mode").on("click",(function(n){const o=e(".open-zen-mode").text(),t=e(".open-zen-mode").attr("data-content-on-click");e(".open-zen-mode").attr("data-content-on-click",o),e(".open-zen-mode").text(t),"undefined"!=typeof sessionStorage&&(e(".content-container").hasClass("zen-mode")?"zenMode"in sessionStorage&&sessionStorage.setItem("zenMode","false"):sessionStorage.setItem("zenMode","true")),e(".content-container").toggleClass("zen-mode tab-modalize"),e(this).blur(),n.preventDefault(),n.stopPropagation()})),e("body").on("keydown",(function(n){if(e(".zen-mode").length>0&&27===n.which){const o=e(".open-zen-mode").text(),t=e(".open-zen-mode").attr("data-content-on-click");e(".open-zen-mode").attr("data-content-on-click",o),e(".open-zen-mode").text(t),"undefined"!=typeof sessionStorage&&"zenMode"in sessionStorage&&sessionStorage.setItem("zenMode","false"),e(".content-container").toggleClass("zen-mode tab-modalize"),e(this).blur(),n.stopPropagation()}})),"undefined"!=typeof sessionStorage&&"zenMode"in sessionStorage&&"true"===sessionStorage.getItem("zenMode")&&e(".open-zen-mode").click())}(jQuery);
//# sourceMappingURL=script.js.69592db26bee.map